import{R as e,P as t,O as r,C as n}from"./vendor-ui-dialog.CY7OxuK6.js";import{r as l}from"./vendor-react-core.D1hcyiwY.js";import{ap as a,aq as u,ar as i}from"./vendor-ui-core.CPnW5LH0.js";var o=.999,c=/[\\\/_+.#"@\[\(\{&]/,d=/[\\\/_+.#"@\[\(\{&]/g,s=/[\s-]/,f=/[\s-]/g;function v(e,t,r,n,l,a,u){if(a===t.length)return l===e.length?1:.99;var i=`${l},${a}`;if(void 0!==u[i])return u[i];for(var m,p,h,g,b=n.charAt(a),E=r.indexOf(b,l),w=0;E>=0;)(m=v(e,t,r,n,E+1,a+1,u))>w&&(E===l?m*=1:c.test(e.charAt(E-1))?(m*=.8,(h=e.slice(l,E-1).match(d))&&l>0&&(m*=Math.pow(o,h.length))):s.test(e.charAt(E-1))?(m*=.9,(g=e.slice(l,E-1).match(f))&&l>0&&(m*=Math.pow(o,g.length))):(m*=.17,l>0&&(m*=Math.pow(o,E-l))),e.charAt(E)!==t.charAt(a)&&(m*=.9999)),(m<.1&&r.charAt(E-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(E-1)!==n.charAt(a))&&(.1*(p=v(e,t,r,n,E+1,a+2,u))>m&&(m=.1*p)),m>w&&(w=m),E=r.indexOf(b,E+1);return u[i]=w,w}function m(e){return e.toLowerCase().replace(f," ")}function p(e,t,r){return v(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,m(e),m(t),0,0,{})}var h='[cmdk-group=""]',g='[cmdk-group-items=""]',b='[cmdk-item=""]',E=`${b}:not([aria-disabled="true"])`,w="cmdk-item-select",k="data-value",y=(e,t,r)=>p(e,t,r),S=l.createContext(void 0),C=()=>l.useContext(S),I=l.createContext(void 0),A=()=>l.useContext(I),x=l.createContext(void 0),R=l.forwardRef(((e,t)=>{let r=B((()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}})),n=B((()=>new Set)),i=B((()=>new Map)),o=B((()=>new Map)),c=B((()=>new Set)),d=N(e),{label:s,children:f,value:v,onValueChange:m,filter:p,shouldFilter:C,loop:A,disablePointerSelection:x=!1,vimBindings:R=!0,...M}=e,D=a(),P=a(),$=a(),j=l.useRef(null),F=U();z((()=>{if(void 0!==v){let e=v.trim();r.current.value=e,K.emit()}}),[v]),z((()=>{F(6,Q)}),[]);let K=l.useMemo((()=>({subscribe:e=>(c.current.add(e),()=>c.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var l,a,u,i;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)J(),_(),F(1,H);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById($);e?e.focus():null==(l=document.getElementById(D))||l.focus()}if(F(7,(()=>{var e;r.current.selectedItemId=null==(e=T())?void 0:e.id,K.emit()})),n||F(5,Q),void 0!==(null==(a=d.current)?void 0:a.value)){let e=null!=t?t:"";return void(null==(i=(u=d.current).onValueChange)||i.call(u,e))}}K.emit()}},emit:()=>{c.current.forEach((e=>e()))}})),[]),O=l.useMemo((()=>({value:(e,t,n)=>{var l;t!==(null==(l=o.current.get(e))?void 0:l.value)&&(o.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,q(t,n)),F(2,(()=>{_(),K.emit()})))},item:(e,t)=>(n.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),F(3,(()=>{J(),_(),r.current.value||H(),K.emit()})),()=>{o.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=T();F(4,(()=>{J(),(null==t?void 0:t.getAttribute("id"))===e&&H(),K.emit()}))}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{o.current.delete(e),i.current.delete(e)}),filter:()=>d.current.shouldFilter,label:s||e["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:D,inputId:$,labelId:P,listInnerRef:j})),[]);function q(e,t){var n,l;let a=null!=(l=null==(n=d.current)?void 0:n.filter)?l:y;return e?a(e,r.current.search,t):0}function _(){if(!r.current.search||!1===d.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach((r=>{let n=i.current.get(r),l=0;n.forEach((t=>{let r=e.get(t);l=Math.max(r,l)})),t.push([r,l])}));let n=j.current;X().sort(((t,r)=>{var n,l;let a=t.getAttribute("id"),u=r.getAttribute("id");return(null!=(n=e.get(u))?n:0)-(null!=(l=e.get(a))?l:0)})).forEach((e=>{let t=e.closest(g);t?t.appendChild(e.parentElement===t?e:e.closest(`${g} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${g} > *`))})),t.sort(((e,t)=>t[1]-e[1])).forEach((e=>{var t;let r=null==(t=j.current)?void 0:t.querySelector(`${h}[${k}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)}))}function H(){let e=X().find((e=>"true"!==e.getAttribute("aria-disabled"))),t=null==e?void 0:e.getAttribute(k);K.setState("value",t||void 0)}function J(){var e,t,l,a;if(!r.current.search||!1===d.current.shouldFilter)return void(r.current.filtered.count=n.current.size);r.current.filtered.groups=new Set;let u=0;for(let i of n.current){let n=q(null!=(t=null==(e=o.current.get(i))?void 0:e.value)?t:"",null!=(a=null==(l=o.current.get(i))?void 0:l.keywords)?a:[]);r.current.filtered.items.set(i,n),n>0&&u++}for(let[n,o]of i.current)for(let e of o)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(n);break}r.current.filtered.count=u}function Q(){var e,t,r;let n=T();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(h))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function T(){var e;return null==(e=j.current)?void 0:e.querySelector(`${b}[aria-selected="true"]`)}function X(){var e;return Array.from((null==(e=j.current)?void 0:e.querySelectorAll(E))||[])}function Y(e){let t=X()[e];t&&K.setState("value",t.getAttribute(k))}function Z(e){var t;let r=T(),n=X(),l=n.findIndex((e=>e===r)),a=n[l+e];null!=(t=d.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&K.setState("value",a.getAttribute(k))}function ee(e){let t,r=T(),n=null==r?void 0:r.closest(h);for(;n&&!t;)n=e>0?L(n,h):V(n,h),t=null==n?void 0:n.querySelector(E);t?K.setState("value",t.getAttribute(k)):Z(e)}let te=()=>Y(X().length-1),re=e=>{e.preventDefault(),e.metaKey?te():e.altKey?ee(1):Z(1)},ne=e=>{e.preventDefault(),e.metaKey?Y(0):e.altKey?ee(-1):Z(-1)};return l.createElement(u.div,{ref:t,tabIndex:-1,...M,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=M.onKeyDown)||t.call(M,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!r)switch(e.key){case"n":case"j":R&&e.ctrlKey&&re(e);break;case"ArrowDown":re(e);break;case"p":case"k":R&&e.ctrlKey&&ne(e);break;case"ArrowUp":ne(e);break;case"Home":e.preventDefault(),Y(0);break;case"End":e.preventDefault(),te();break;case"Enter":{e.preventDefault();let t=T();if(t){let e=new Event(w);t.dispatchEvent(e)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:W},s),G(e,(e=>l.createElement(I.Provider,{value:K},l.createElement(S.Provider,{value:O},e)))))})),M=l.forwardRef(((e,t)=>{var r,n;let o=a(),c=l.useRef(null),d=l.useContext(x),s=C(),f=N(e),v=null!=(n=null==(r=f.current)?void 0:r.forceMount)?n:null==d?void 0:d.forceMount;z((()=>{if(!v)return s.item(o,null==d?void 0:d.id)}),[v]);let m=H(o,c,[e.value,e.children,c],e.keywords),p=A(),h=_((e=>e.value&&e.value===m.current)),g=_((e=>!(!v&&!1!==s.filter())||(!e.search||e.filtered.items.get(o)>0)));function b(){var e,t;E(),null==(t=(e=f.current).onSelect)||t.call(e,m.current)}function E(){p.setState("value",m.current,!0)}if(l.useEffect((()=>{let t=c.current;if(t&&!e.disabled)return t.addEventListener(w,b),()=>t.removeEventListener(w,b)}),[g,e.onSelect,e.disabled]),!g)return null;let{disabled:k,value:y,onSelect:S,forceMount:I,keywords:R,...M}=e;return l.createElement(u.div,{ref:i(c,t),...M,id:o,"cmdk-item":"",role:"option","aria-disabled":!!k,"aria-selected":!!h,"data-disabled":!!k,"data-selected":!!h,onPointerMove:k||s.getDisablePointerSelection()?void 0:E,onClick:k?void 0:b},e.children)})),D=l.forwardRef(((e,t)=>{let{heading:r,children:n,forceMount:o,...c}=e,d=a(),s=l.useRef(null),f=l.useRef(null),v=a(),m=C(),p=_((e=>!(!o&&!1!==m.filter())||(!e.search||e.filtered.groups.has(d))));z((()=>m.group(d)),[]),H(d,s,[e.value,e.heading,f]);let h=l.useMemo((()=>({id:d,forceMount:o})),[o]);return l.createElement(u.div,{ref:i(s,t),...c,"cmdk-group":"",role:"presentation",hidden:!p||void 0},r&&l.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:v},r),G(e,(e=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?v:void 0},l.createElement(x.Provider,{value:h},e)))))})),P=l.forwardRef(((e,t)=>{let{alwaysRender:r,...n}=e,a=l.useRef(null),o=_((e=>!e.search));return r||o?l.createElement(u.div,{ref:i(a,t),...n,"cmdk-separator":"",role:"separator"}):null})),$=l.forwardRef(((e,t)=>{let{onValueChange:r,...n}=e,a=null!=e.value,i=A(),o=_((e=>e.search)),c=_((e=>e.selectedItemId)),d=C();return l.useEffect((()=>{null!=e.value&&i.setState("search",e.value)}),[e.value]),l.createElement(u.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:a?e.value:o,onChange:e=>{a||i.setState("search",e.target.value),null==r||r(e.target.value)}})})),j=l.forwardRef(((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,o=l.useRef(null),c=l.useRef(null),d=_((e=>e.selectedItemId)),s=C();return l.useEffect((()=>{if(c.current&&o.current){let e,t=c.current,r=o.current,n=new ResizeObserver((()=>{e=requestAnimationFrame((()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")}))}));return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}}),[]),l.createElement(u.div,{ref:i(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":n,id:s.listId},G(e,(e=>l.createElement("div",{ref:i(c,s.listInnerRef),"cmdk-list-sizer":""},e))))})),F=l.forwardRef(((a,u)=>{let{open:i,onOpenChange:o,overlayClassName:c,contentClassName:d,container:s,...f}=a;return l.createElement(e,{open:i,onOpenChange:o},l.createElement(t,{container:s},l.createElement(r,{"cmdk-overlay":"",className:c}),l.createElement(n,{"aria-label":a.label,"cmdk-dialog":"",className:d},l.createElement(R,{ref:u,...f}))))})),K=l.forwardRef(((e,t)=>_((e=>0===e.filtered.count))?l.createElement(u.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null)),O=l.forwardRef(((e,t)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return l.createElement(u.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},G(e,(e=>l.createElement("div",{"aria-hidden":!0},e))))})),q=Object.assign(R,{List:j,Item:M,Input:$,Group:D,Separator:P,Dialog:F,Empty:K,Loading:O});function L(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function V(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function N(e){let t=l.useRef(e);return z((()=>{t.current=e})),t}var z="undefined"==typeof window?l.useEffect:l.useLayoutEffect;function B(e){let t=l.useRef();return void 0===t.current&&(t.current=e()),t}function _(e){let t=A(),r=()=>e(t.snapshot());return l.useSyncExternalStore(t.subscribe,r,r)}function H(e,t,r,n=[]){let a=l.useRef(),u=C();return z((()=>{var l;let i=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),o=n.map((e=>e.trim()));u.value(e,i,o),null==(l=t.current)||l.setAttribute(k,i),a.current=i})),a}var U=()=>{let[e,t]=l.useState(),r=B((()=>new Map));return z((()=>{r.current.forEach((e=>e())),r.current=new Map}),[e]),(e,n)=>{r.current.set(e,n),t({})}};function G({asChild:e,children:t},r){return e&&l.isValidElement(t)?l.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var W={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{q as _};
//# sourceMappingURL=vendor--cmdk.q6oiTfmV.js.map
