import{r as e,j as t}from"./vendor-react-core.D1hcyiwY.js";import{n as r,i as s,Q as n,M as u}from"./vendor---tanstack-query-core.CIZi0Zbo.js";var o=e.createContext(void 0),a=t=>{const r=e.useContext(o);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},i=({client:r,children:s})=>(e.useEffect((()=>(r.mount(),()=>{r.unmount()})),[r]),t.jsx(o.Provider,{value:r,children:s})),c=e.createContext(!1);c.Provider;var l=e.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}());function f(e,t){return"function"==typeof e?e(...t):!!e}function p(){}var h=(e,t,r)=>t.fetchOptimistic(e).catch((()=>{r.clearReset()}));function m(t,n,u){const o=a(),i=e.useContext(c),m=e.useContext(l),y=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(y),y._optimisticResults=i?"isRestoring":"optimistic",(e=>{const t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(y),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(y,m),(t=>{e.useEffect((()=>{t.clearReset()}),[t])})(m);const g=!o.getQueryCache().get(y.queryHash),[C]=e.useState((()=>new n(o,y))),d=C.getOptimisticResult(y),R=!i&&!1!==t.subscribed;if(e.useSyncExternalStore(e.useCallback((e=>{const t=R?C.subscribe(r.batchCalls(e)):p;return C.updateResult(),t}),[C,R]),(()=>C.getCurrentResult()),(()=>C.getCurrentResult())),e.useEffect((()=>{C.setOptions(y)}),[y,C]),((e,t)=>e?.suspense&&t.isPending)(y,d))throw h(y,C,m);if((({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(n&&void 0===e.data||f(r,[e.error,s])))({result:d,errorResetBoundary:m,throwOnError:y.throwOnError,query:o.getQueryCache().get(y.queryHash),suspense:y.suspense}))throw d.error;if(o.getDefaultOptions().queries?._experimental_afterQuery?.(y,d),y.experimental_prefetchInRender&&!s&&((e,t)=>e.isLoading&&e.isFetching&&!t)(d,i)){const e=g?h(y,C,m):o.getQueryCache().get(y.queryHash)?.promise;e?.catch(p).finally((()=>{C.updateResult()}))}return y.notifyOnChangeProps?d:C.trackResult(d)}function y(e,t){return m(e,n)}function g(t,s){const n=a(),[o]=e.useState((()=>new u(n,t)));e.useEffect((()=>{o.setOptions(t)}),[o,t]);const i=e.useSyncExternalStore(e.useCallback((e=>o.subscribe(r.batchCalls(e))),[o]),(()=>o.getCurrentResult()),(()=>o.getCurrentResult())),c=e.useCallback(((e,t)=>{o.mutate(e,t).catch(p)}),[o]);if(i.error&&f(o.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:c,mutateAsync:i.mutate}}export{i as Q,y as a,g as b,a as u};
//# sourceMappingURL=vendor-query-main.DFU6mXji.js.map
