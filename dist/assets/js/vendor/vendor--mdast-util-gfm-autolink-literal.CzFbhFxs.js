import{c as t}from"./vendor--ccount.D181NsKZ.js";import{o as n}from"./vendor--devlop.Cl3hj7Sz.js";import{u as e,a as i}from"./vendor--micromark-util-character.DUwsRT9L.js";import{f as l}from"./vendor--mdast-util-find-and-replace.2NNR_zk8.js";const r="phrasing",o=["autolink","link","image","label"];function c(){return{transforms:[k],enter:{literalAutolink:a,literalAutolinkEmail:s,literalAutolinkHttp:s,literalAutolinkWww:s},exit:{literalAutolink:d,literalAutolinkEmail:p,literalAutolinkHttp:f,literalAutolinkWww:h}}}function u(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:r,notInConstruct:o},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:r,notInConstruct:o},{character:":",before:"[ps]",after:"\\/",inConstruct:r,notInConstruct:o}]}}function a(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function s(t){this.config.enter.autolinkProtocol.call(this,t)}function f(t){this.config.exit.autolinkProtocol.call(this,t)}function h(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];n("link"===e.type),e.url="http://"+this.sliceSerialize(t)}function p(t){this.config.exit.autolinkEmail.call(this,t)}function d(t){this.exit(t)}function k(t){l(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,g],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,m]],{ignore:["link","linkReference"]})}function g(n,e,i,l,r){let o="";if(!w(r))return!1;if(/^w/i.test(e)&&(i=e+i,e="",o="http://"),!function(t){const n=t.split(".");if(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))return!1;return!0}(i))return!1;const c=function(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let i=e[0],l=i.indexOf(")");const r=t(n,"(");let o=t(n,")");for(;-1!==l&&r>o;)n+=i.slice(0,l+1),i=i.slice(l+1),l=i.indexOf(")"),o++;return[n,i]}(i+l);if(!c[0])return!1;const u={type:"link",title:null,url:o+e+c[0],children:[{type:"text",value:e+c[0]}]};return c[1]?[u,{type:"text",value:c[1]}]:u}function m(t,n,e,i){return!(!w(i,!0)||/[-\d_]$/.test(e))&&{type:"link",title:null,url:"mailto:"+n+"@"+e,children:[{type:"text",value:n+"@"+e}]}}function w(t,n){const l=t.input.charCodeAt(t.index-1);return(0===t.index||e(l)||i(l))&&(!n||47!==l)}export{u as a,c as g};
//# sourceMappingURL=vendor--mdast-util-gfm-autolink-literal.CzFbhFxs.js.map
