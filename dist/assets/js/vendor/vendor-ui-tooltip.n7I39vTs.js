import{r as e,j as t}from"./vendor-react-core.D1hcyiwY.js";import{as as n,av as o,aJ as r,aB as a,aK as i,aL as s,aM as l,ay as c,ap as u,at as p,aN as d,aO as f,aq as h,ax as x,aP as g}from"./vendor-ui-core.CPnW5LH0.js";var[y,v]=n("Tooltip",[r]),b=r(),w="TooltipProvider",m=700,T="tooltip.open",[C,E]=y(w),_=n=>{const{__scopeTooltip:o,delayDuration:r=m,skipDelayDuration:a=300,disableHoverableContent:i=!1,children:s}=n,[l,c]=e.useState(!0),u=e.useRef(!1),p=e.useRef(0);return e.useEffect((()=>{const e=p.current;return()=>window.clearTimeout(e)}),[]),t.jsx(C,{scope:o,isOpenDelayed:l,delayDuration:r,onOpen:e.useCallback((()=>{window.clearTimeout(p.current),c(!1)}),[]),onClose:e.useCallback((()=>{window.clearTimeout(p.current),p.current=window.setTimeout((()=>c(!0)),a)}),[a]),isPointerInTransitRef:u,onPointerInTransitChange:e.useCallback((e=>{u.current=e}),[]),disableHoverableContent:i,children:s})};_.displayName=w;var k="Tooltip",[j,P]=y(k),R=n=>{const{__scopeTooltip:o,children:r,open:a,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:l,delayDuration:c}=n,f=E(k,n.__scopeTooltip),h=b(o),[x,g]=e.useState(null),y=u(),v=e.useRef(0),w=l??f.disableHoverableContent,m=c??f.delayDuration,C=e.useRef(!1),[_=!1,P]=p({prop:a,defaultProp:i,onChange:e=>{e?(f.onOpen(),document.dispatchEvent(new CustomEvent(T))):f.onClose(),s?.(e)}}),R=e.useMemo((()=>_?C.current?"delayed-open":"instant-open":"closed"),[_]),D=e.useCallback((()=>{window.clearTimeout(v.current),v.current=0,C.current=!1,P(!0)}),[P]),L=e.useCallback((()=>{window.clearTimeout(v.current),v.current=0,P(!1)}),[P]),O=e.useCallback((()=>{window.clearTimeout(v.current),v.current=window.setTimeout((()=>{C.current=!0,P(!0),v.current=0}),m)}),[m,P]);return e.useEffect((()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)}),[]),t.jsx(d,{...h,children:t.jsx(j,{scope:o,contentId:y,open:_,stateAttribute:R,trigger:x,onTriggerChange:g,onTriggerEnter:e.useCallback((()=>{f.isOpenDelayed?O():D()}),[f.isOpenDelayed,O,D]),onTriggerLeave:e.useCallback((()=>{w?L():(window.clearTimeout(v.current),v.current=0)}),[L,w]),onOpen:D,onClose:L,disableHoverableContent:w,children:r})})};R.displayName=k;var D="TooltipTrigger",L=e.forwardRef(((n,o)=>{const{__scopeTooltip:r,...a}=n,i=P(D,r),s=E(D,r),l=b(r),u=e.useRef(null),p=c(o,u,i.onTriggerChange),d=e.useRef(!1),g=e.useRef(!1),y=e.useCallback((()=>d.current=!1),[]);return e.useEffect((()=>()=>document.removeEventListener("pointerup",y)),[y]),t.jsx(f,{asChild:!0,...l,children:t.jsx(h.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...a,ref:p,onPointerMove:x(n.onPointerMove,(e=>{"touch"!==e.pointerType&&(g.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),g.current=!0))})),onPointerLeave:x(n.onPointerLeave,(()=>{i.onTriggerLeave(),g.current=!1})),onPointerDown:x(n.onPointerDown,(()=>{d.current=!0,document.addEventListener("pointerup",y,{once:!0})})),onFocus:x(n.onFocus,(()=>{d.current||i.onOpen()})),onBlur:x(n.onBlur,i.onClose),onClick:x(n.onClick,i.onClose)})})}));L.displayName=D;var[O,M]=y("TooltipPortal",{forceMount:void 0}),I="TooltipContent",H=e.forwardRef(((e,n)=>{const r=M(I,e.__scopeTooltip),{forceMount:a=r.forceMount,side:i="top",...s}=e,l=P(I,e.__scopeTooltip);return t.jsx(o,{present:a||l.open,children:l.disableHoverableContent?t.jsx(S,{side:i,...s,ref:n}):t.jsx(N,{side:i,...s,ref:n})})})),N=e.forwardRef(((n,o)=>{const r=P(I,n.__scopeTooltip),a=E(I,n.__scopeTooltip),i=e.useRef(null),s=c(o,i),[l,u]=e.useState(null),{trigger:p,onClose:d}=r,f=i.current,{onPointerInTransitChange:h}=a,x=e.useCallback((()=>{u(null),h(!1)}),[h]),g=e.useCallback(((e,t)=>{const n=e.currentTarget,o={x:e.clientX,y:e.clientY},r=function(e,t,n=5){const o=[];switch(t){case"top":o.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":o.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":o.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":o.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return o}(o,function(e,t){const n=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,o,r,a)){case a:return"left";case r:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}(o,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const n=e[o];for(;t.length>=2;){const e=t[t.length-1],o=t[t.length-2];if(!((e.x-o.x)*(n.y-o.y)>=(e.y-o.y)*(n.x-o.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let o=e.length-1;o>=0;o--){const t=e[o];for(;n.length>=2;){const e=n[n.length-1],o=n[n.length-2];if(!((e.x-o.x)*(t.y-o.y)>=(e.y-o.y)*(t.x-o.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...r,...function(e){const{top:t,right:n,bottom:o,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:o},{x:r,y:o}]}(t.getBoundingClientRect())]);u(a),h(!0)}),[h]);return e.useEffect((()=>()=>x()),[x]),e.useEffect((()=>{if(p&&f){const e=e=>g(e,f),t=e=>g(e,p);return p.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{p.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}}),[p,f,g,x]),e.useEffect((()=>{if(l){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},o=p?.contains(t)||f?.contains(t),r=!function(e,t){const{x:n,y:o}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,s=t[a].y,l=t[i].x,c=t[i].y;s>o!=c>o&&n<(l-e)*(o-s)/(c-s)+e&&(r=!r)}return r}(n,l);o?x():r&&(x(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[p,f,l,d,x]),t.jsx(S,{...n,ref:s})})),[B,A]=y(k,{isInside:!1}),S=e.forwardRef(((n,o)=>{const{__scopeTooltip:r,children:c,"aria-label":u,onEscapeKeyDown:p,onPointerDownOutside:d,...f}=n,h=P(I,r),x=b(r),{onClose:g}=h;return e.useEffect((()=>(document.addEventListener(T,g),()=>document.removeEventListener(T,g))),[g]),e.useEffect((()=>{if(h.trigger){const e=e=>{const t=e.target;t?.contains(h.trigger)&&g()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[h.trigger,g]),t.jsx(a,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:p,onPointerDownOutside:d,onFocusOutside:e=>e.preventDefault(),onDismiss:g,children:t.jsxs(i,{"data-state":h.stateAttribute,...x,...f,ref:o,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(s,{children:c}),t.jsx(B,{scope:r,isInside:!0,children:t.jsx(l,{id:h.contentId,role:"tooltip",children:u||c})})]})})}));H.displayName=I;var F="TooltipArrow";e.forwardRef(((e,n)=>{const{__scopeTooltip:o,...r}=e,a=b(o);return A(F,o).isInside?null:t.jsx(g,{...a,...r,ref:n})})).displayName=F;var K=_,X=R,Y=L,q=H;export{q as C,K as P,X as R,Y as T};
//# sourceMappingURL=vendor-ui-tooltip.n7I39vTs.js.map
