{"version":3,"file":"vendor--react-async-script.CxxufyF-.js","sources":["../../../../node_modules/react-async-script/lib/esm/async-script-loader.js"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport { Component, createElement, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport hoistStatics from \"hoist-non-react-statics\";\nvar SCRIPT_MAP = {}; // A counter used to generate a unique id for each component that uses the function\n\nvar idCount = 0;\nexport default function makeAsyncScript(getScriptURL, options) {\n  options = options || {};\n  return function wrapWithAsyncScript(WrappedComponent) {\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n\n    var AsyncScriptLoader =\n    /*#__PURE__*/\n    function (_Component) {\n      _inheritsLoose(AsyncScriptLoader, _Component);\n\n      function AsyncScriptLoader(props, context) {\n        var _this;\n\n        _this = _Component.call(this, props, context) || this;\n        _this.state = {};\n        _this.__scriptURL = \"\";\n        return _this;\n      }\n\n      var _proto = AsyncScriptLoader.prototype;\n\n      _proto.asyncScriptLoaderGetScriptLoaderID = function asyncScriptLoaderGetScriptLoaderID() {\n        if (!this.__scriptLoaderID) {\n          this.__scriptLoaderID = \"async-script-loader-\" + idCount++;\n        }\n\n        return this.__scriptLoaderID;\n      };\n\n      _proto.setupScriptURL = function setupScriptURL() {\n        this.__scriptURL = typeof getScriptURL === \"function\" ? getScriptURL() : getScriptURL;\n        return this.__scriptURL;\n      };\n\n      _proto.asyncScriptLoaderHandleLoad = function asyncScriptLoaderHandleLoad(state) {\n        var _this2 = this;\n\n        // use reacts setState callback to fire props.asyncScriptOnLoad with new state/entry\n        this.setState(state, function () {\n          return _this2.props.asyncScriptOnLoad && _this2.props.asyncScriptOnLoad(_this2.state);\n        });\n      };\n\n      _proto.asyncScriptLoaderTriggerOnScriptLoaded = function asyncScriptLoaderTriggerOnScriptLoaded() {\n        var mapEntry = SCRIPT_MAP[this.__scriptURL];\n\n        if (!mapEntry || !mapEntry.loaded) {\n          throw new Error(\"Script is not loaded.\");\n        }\n\n        for (var obsKey in mapEntry.observers) {\n          mapEntry.observers[obsKey](mapEntry);\n        }\n\n        delete window[options.callbackName];\n      };\n\n      _proto.componentDidMount = function componentDidMount() {\n        var _this3 = this;\n\n        var scriptURL = this.setupScriptURL();\n        var key = this.asyncScriptLoaderGetScriptLoaderID();\n        var _options = options,\n            globalName = _options.globalName,\n            callbackName = _options.callbackName,\n            scriptId = _options.scriptId; // check if global object already attached to window\n\n        if (globalName && typeof window[globalName] !== \"undefined\") {\n          SCRIPT_MAP[scriptURL] = {\n            loaded: true,\n            observers: {}\n          };\n        } // check if script loading already\n\n\n        if (SCRIPT_MAP[scriptURL]) {\n          var entry = SCRIPT_MAP[scriptURL]; // if loaded or errored then \"finish\"\n\n          if (entry && (entry.loaded || entry.errored)) {\n            this.asyncScriptLoaderHandleLoad(entry);\n            return;\n          } // if still loading then callback to observer queue\n\n\n          entry.observers[key] = function (entry) {\n            return _this3.asyncScriptLoaderHandleLoad(entry);\n          };\n\n          return;\n        }\n        /*\n         * hasn't started loading\n         * start the \"magic\"\n         * setup script to load and observers\n         */\n\n\n        var observers = {};\n\n        observers[key] = function (entry) {\n          return _this3.asyncScriptLoaderHandleLoad(entry);\n        };\n\n        SCRIPT_MAP[scriptURL] = {\n          loaded: false,\n          observers: observers\n        };\n        var script = document.createElement(\"script\");\n        script.src = scriptURL;\n        script.async = true;\n\n        for (var attribute in options.attributes) {\n          script.setAttribute(attribute, options.attributes[attribute]);\n        }\n\n        if (scriptId) {\n          script.id = scriptId;\n        }\n\n        var callObserverFuncAndRemoveObserver = function callObserverFuncAndRemoveObserver(func) {\n          if (SCRIPT_MAP[scriptURL]) {\n            var mapEntry = SCRIPT_MAP[scriptURL];\n            var observersMap = mapEntry.observers;\n\n            for (var obsKey in observersMap) {\n              if (func(observersMap[obsKey])) {\n                delete observersMap[obsKey];\n              }\n            }\n          }\n        };\n\n        if (callbackName && typeof window !== \"undefined\") {\n          window[callbackName] = function () {\n            return _this3.asyncScriptLoaderTriggerOnScriptLoaded();\n          };\n        }\n\n        script.onload = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.loaded = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              if (callbackName) {\n                return false;\n              }\n\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        script.onerror = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.errored = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        document.body.appendChild(script);\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        // Remove tag script\n        var scriptURL = this.__scriptURL;\n\n        if (options.removeOnUnmount === true) {\n          var allScripts = document.getElementsByTagName(\"script\");\n\n          for (var i = 0; i < allScripts.length; i += 1) {\n            if (allScripts[i].src.indexOf(scriptURL) > -1) {\n              if (allScripts[i].parentNode) {\n                allScripts[i].parentNode.removeChild(allScripts[i]);\n              }\n            }\n          }\n        } // Clean the observer entry\n\n\n        var mapEntry = SCRIPT_MAP[scriptURL];\n\n        if (mapEntry) {\n          delete mapEntry.observers[this.asyncScriptLoaderGetScriptLoaderID()];\n\n          if (options.removeOnUnmount === true) {\n            delete SCRIPT_MAP[scriptURL];\n          }\n        }\n      };\n\n      _proto.render = function render() {\n        var globalName = options.globalName; // remove asyncScriptOnLoad from childProps\n\n        var _this$props = this.props,\n            asyncScriptOnLoad = _this$props.asyncScriptOnLoad,\n            forwardedRef = _this$props.forwardedRef,\n            childProps = _objectWithoutPropertiesLoose(_this$props, [\"asyncScriptOnLoad\", \"forwardedRef\"]); // eslint-disable-line no-unused-vars\n\n\n        if (globalName && typeof window !== \"undefined\") {\n          childProps[globalName] = typeof window[globalName] !== \"undefined\" ? window[globalName] : undefined;\n        }\n\n        childProps.ref = forwardedRef;\n        return createElement(WrappedComponent, childProps);\n      };\n\n      return AsyncScriptLoader;\n    }(Component); // Note the second param \"ref\" provided by React.forwardRef.\n    // We can pass it along to AsyncScriptLoader as a regular prop, e.g. \"forwardedRef\"\n    // And it can then be attached to the Component.\n\n\n    var ForwardedComponent = forwardRef(function (props, ref) {\n      return createElement(AsyncScriptLoader, _extends({}, props, {\n        forwardedRef: ref\n      }));\n    });\n    ForwardedComponent.displayName = \"AsyncScriptLoader(\" + wrappedComponentName + \")\";\n    ForwardedComponent.propTypes = {\n      asyncScriptOnLoad: PropTypes.func\n    };\n    return hoistStatics(ForwardedComponent, WrappedComponent);\n  };\n}"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","SCRIPT_MAP","idCount","makeAsyncScript","getScriptURL","options","WrappedComponent","wrappedComponentName","displayName","name","AsyncScriptLoader","_Component","subClass","superClass","props","context","_this","state","__scriptURL","create","constructor","__proto__","_proto","asyncScriptLoaderGetScriptLoaderID","__scriptLoaderID","setupScriptURL","asyncScriptLoaderHandleLoad","_this2","setState","asyncScriptOnLoad","asyncScriptLoaderTriggerOnScriptLoaded","mapEntry","loaded","Error","obsKey","observers","window","callbackName","componentDidMount","_this3","scriptURL","_options","globalName","scriptId","entry","errored","script","document","createElement","attribute","src","async","attributes","setAttribute","id","callObserverFuncAndRemoveObserver","func","observersMap","onload","observer","onerror","body","appendChild","componentWillUnmount","removeOnUnmount","allScripts","getElementsByTagName","indexOf","parentNode","removeChild","render","_this$props","forwardedRef","childProps","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","undefined","ref","Component","ForwardedComponent","forwardRef","propTypes","PropTypes","hoistStatics"],"mappings":"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","x_google_ignoreList":[0]}