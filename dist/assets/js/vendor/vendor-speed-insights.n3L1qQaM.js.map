{"version":3,"file":"vendor-speed-insights.n3L1qQaM.js","sources":["../../../../node_modules/@vercel/speed-insights/dist/react/index.mjs"],"sourcesContent":["\"use client\";\n\n// src/react/index.tsx\nimport { useEffect, useRef } from \"react\";\n\n// package.json\nvar name = \"@vercel/speed-insights\";\nvar version = \"1.2.0\";\n\n// src/queue.ts\nvar initQueue = () => {\n  if (window.si) return;\n  window.si = function a(...params) {\n    (window.siq = window.siq || []).push(params);\n  };\n};\n\n// src/utils.ts\nfunction isBrowser() {\n  return typeof window !== \"undefined\";\n}\nfunction detectEnvironment() {\n  try {\n    const env = process.env.NODE_ENV;\n    if (env === \"development\" || env === \"test\") {\n      return \"development\";\n    }\n  } catch (e) {\n  }\n  return \"production\";\n}\nfunction isDevelopment() {\n  return detectEnvironment() === \"development\";\n}\nfunction computeRoute(pathname, pathParams) {\n  if (!pathname || !pathParams) {\n    return pathname;\n  }\n  let result = pathname;\n  try {\n    const entries = Object.entries(pathParams);\n    for (const [key, value] of entries) {\n      if (!Array.isArray(value)) {\n        const matcher = turnValueToRegExp(value);\n        if (matcher.test(result)) {\n          result = result.replace(matcher, `/[${key}]`);\n        }\n      }\n    }\n    for (const [key, value] of entries) {\n      if (Array.isArray(value)) {\n        const matcher = turnValueToRegExp(value.join(\"/\"));\n        if (matcher.test(result)) {\n          result = result.replace(matcher, `/[...${key}]`);\n        }\n      }\n    }\n    return result;\n  } catch (e) {\n    return pathname;\n  }\n}\nfunction turnValueToRegExp(value) {\n  return new RegExp(`/${escapeRegExp(value)}(?=[/?#]|$)`);\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction getScriptSrc(props) {\n  if (props.scriptSrc) {\n    return props.scriptSrc;\n  }\n  if (isDevelopment()) {\n    return \"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js\";\n  }\n  if (props.dsn) {\n    return \"https://va.vercel-scripts.com/v1/speed-insights/script.js\";\n  }\n  if (props.basePath) {\n    return `${props.basePath}/speed-insights/script.js`;\n  }\n  return \"/_vercel/speed-insights/script.js\";\n}\n\n// src/generic.ts\nfunction injectSpeedInsights(props = {}) {\n  var _a;\n  if (!isBrowser() || props.route === null) return null;\n  initQueue();\n  const src = getScriptSrc(props);\n  if (document.head.querySelector(`script[src*=\"${src}\"]`)) return null;\n  if (props.beforeSend) {\n    (_a = window.si) == null ? void 0 : _a.call(window, \"beforeSend\", props.beforeSend);\n  }\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.defer = true;\n  script.dataset.sdkn = name + (props.framework ? `/${props.framework}` : \"\");\n  script.dataset.sdkv = version;\n  if (props.sampleRate) {\n    script.dataset.sampleRate = props.sampleRate.toString();\n  }\n  if (props.route) {\n    script.dataset.route = props.route;\n  }\n  if (props.endpoint) {\n    script.dataset.endpoint = props.endpoint;\n  } else if (props.basePath) {\n    script.dataset.endpoint = `${props.basePath}/speed-insights/vitals`;\n  }\n  if (props.dsn) {\n    script.dataset.dsn = props.dsn;\n  }\n  if (isDevelopment() && props.debug === false) {\n    script.dataset.debug = \"false\";\n  }\n  script.onerror = () => {\n    console.log(\n      `[Vercel Speed Insights] Failed to load script from ${src}. Please check if any content blockers are enabled and try again.`\n    );\n  };\n  document.head.appendChild(script);\n  return {\n    setRoute: (route) => {\n      script.dataset.route = route ?? void 0;\n    }\n  };\n}\n\n// src/react/utils.ts\nfunction getBasePath() {\n  if (typeof process === \"undefined\" || typeof process.env === \"undefined\") {\n    return void 0;\n  }\n  return process.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH;\n}\n\n// src/react/index.tsx\nfunction SpeedInsights(props) {\n  useEffect(() => {\n    var _a;\n    if (props.beforeSend) {\n      (_a = window.si) == null ? void 0 : _a.call(window, \"beforeSend\", props.beforeSend);\n    }\n  }, [props.beforeSend]);\n  const setScriptRoute = useRef(null);\n  useEffect(() => {\n    if (!setScriptRoute.current) {\n      const script = injectSpeedInsights({\n        framework: props.framework ?? \"react\",\n        basePath: props.basePath ?? getBasePath(),\n        ...props\n      });\n      if (script) {\n        setScriptRoute.current = script.setRoute;\n      }\n    } else if (props.route) {\n      setScriptRoute.current(props.route);\n    }\n  }, [props.route]);\n  return null;\n}\nexport {\n  SpeedInsights,\n  computeRoute\n};\n//# sourceMappingURL=index.mjs.map"],"names":["injectSpeedInsights","props","_a","window","route","si","params","siq","push","src","scriptSrc","dsn","basePath","getScriptSrc","document","head","querySelector","beforeSend","call","script","createElement","defer","dataset","sdkn","framework","sdkv","sampleRate","toString","endpoint","onerror","appendChild","setRoute","getBasePath","process","define_process_env_default","REACT_APP_VERCEL_OBSERVABILITY_BASEPATH","SpeedInsights","useEffect","setScriptRoute","useRef","current"],"mappings":"6DAqFA,SAASA,EAAoBC,EAAQ,IAC/B,IAAAC,EACJ,GApEyB,oBAAXC,QAoEsB,OAAhBF,EAAMG,MAAuB,OAAA,KA5E7CD,OAAOE,KACJF,OAAAE,GAAK,YAAcC,IACvBH,OAAOI,IAAMJ,OAAOI,KAAO,IAAIC,KAAKF,EACvC,GA2EM,MAAAG,EArBR,SAAsBR,GACpB,OAAIA,EAAMS,UACDT,EAAMS,UAKXT,EAAMU,IACD,4DAELV,EAAMW,SACD,GAAGX,EAAMW,oCAEX,mCACT,CAOcC,CAAaZ,GACzB,GAAIa,SAASC,KAAKC,cAAc,gBAAgBP,OAAiB,OAAA,KAC7DR,EAAMgB,aACY,OAAnBf,EAAKC,OAAOE,KAAuBH,EAAGgB,KAAKf,OAAQ,aAAcF,EAAMgB,aAEpE,MAAAE,EAASL,SAASM,cAAc,UA4B/B,OA3BPD,EAAOV,IAAMA,EACbU,EAAOE,OAAQ,EACRF,EAAAG,QAAQC,KA3FN,0BA2FqBtB,EAAMuB,UAAY,IAAIvB,EAAMuB,YAAc,IACxEL,EAAOG,QAAQG,KA3FH,QA4FRxB,EAAMyB,aACRP,EAAOG,QAAQI,WAAazB,EAAMyB,WAAWC,YAE3C1B,EAAMG,QACDe,EAAAG,QAAQlB,MAAQH,EAAMG,OAE3BH,EAAM2B,SACDT,EAAAG,QAAQM,SAAW3B,EAAM2B,SACvB3B,EAAMW,WACfO,EAAOG,QAAQM,SAAW,GAAG3B,EAAMW,kCAEjCX,EAAMU,MACDQ,EAAAG,QAAQX,IAAMV,EAAMU,KAK7BQ,EAAOU,QAAU,KAGf,EAEOf,SAAAC,KAAKe,YAAYX,GACnB,CACLY,SAAW3B,IACFe,EAAAG,QAAQlB,MAAQA,QAAS,CAAA,EAGtC,CAGA,SAAS4B,IACP,GAAuB,oBAAZC,QAGX,OAAOC,EAAYC,uCACrB,CAGA,SAASC,EAAcnC,GACrBoC,EAAAA,WAAU,KACJ,IAAAnC,EACAD,EAAMgB,aACY,OAAnBf,EAAKC,OAAOE,KAAuBH,EAAGgB,KAAKf,OAAQ,aAAcF,EAAMgB,YAAU,GAEnF,CAAChB,EAAMgB,aACJ,MAAAqB,EAAiBC,SAAO,MAevB,OAdPF,EAAAA,WAAU,KACJ,GAACC,EAAeE,QASTvC,EAAMG,OACAkC,EAAAE,QAAQvC,EAAMG,WAVF,CAC3B,MAAMe,EAASnB,EAAoB,CACjCwB,UAAWvB,EAAMuB,WAAa,QAC9BZ,SAAUX,EAAMW,UAAYoB,OACzB/B,IAEDkB,IACFmB,EAAeE,QAAUrB,EAAOY,SAClC,CAEkC,GAEnC,CAAC9B,EAAMG,QACH,IACT","x_google_ignoreList":[0]}