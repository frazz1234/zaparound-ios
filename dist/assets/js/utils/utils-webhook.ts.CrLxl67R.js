import{s as t}from"../components/components-admin.CiIAoamg.js";async function e(e){try{const i=e.trip_type?.toLowerCase()||"zaptrip",{data:a,error:r}=await t.functions.invoke(`make-webhook/${i}`,{body:e});return!r}catch(i){return!1}}function i(t){let e="";t.email?e=t.email:t.profile_data?.email&&(e=t.profile_data.email);const i=t.profile_data||{};e&&i&&!i.email&&(i.email=e);let a=t.transportation_mode||"",r="";if(t.transportation_details)if("string"==typeof t.transportation_details)try{const e=JSON.parse(t.transportation_details);a=e.mode||a,r=e.details||""}catch(c){}else a=t.transportation_details.mode||a,r=t.transportation_details.details||"";let o=t.accommodation_type||"",s="";if(t.accommodation_details)if("string"==typeof t.accommodation_details)try{const e=JSON.parse(t.accommodation_details);o=e.type||o,s=e.details||""}catch(c){}else o=t.accommodation_details.type||o,s=t.accommodation_details.details||"";let n=null;if(t.coordinates)try{n="string"==typeof t.coordinates?JSON.parse(t.coordinates):t.coordinates}catch(c){}let d=null;if(t.departure_coordinates)try{d="string"==typeof t.departure_coordinates?JSON.parse(t.departure_coordinates):t.departure_coordinates}catch(c){}return{trip_id:t.id,title:t.title,description:t.description,location:t.location,coordinates:n,start_date:t.start_date,end_date:t.end_date,category:t.category,budget:parseFloat(t.budget||"0"),currency:t.currency||"USD",transportation_mode:a,transportation_details:r,accommodation_type:o,accommodation_details:s,adults:t.adults,kids:t.kids,trip_type:t.trip_type,user_id:t.user_id,user_email:e,notes:t.notes||"",profile:i,departure_location:t.departure_location||"",departure_coordinates:d,interests:Array.isArray(t.interests)?t.interests:[],has_pets:t.has_pets||!1}}function a(t){let e="";t.email?e=t.email:t.profile_data?.email&&(e=t.profile_data.email);const i=t.profile_data||{};e&&i&&!i.email&&(i.email=e);const a=Array.isArray(t.activity_times)?t.activity_times:[],r=Array.isArray(t.activity_types)?t.activity_types:[],o=Array.isArray(t.requested_activities)?t.requested_activities:[];let s=null;if(t.coordinates)try{s="string"==typeof t.coordinates?JSON.parse(t.coordinates):t.coordinates}catch(d){}let n=null;if(t.date)try{n=new Date(t.date).toISOString()}catch(d){}return{zapout_id:t.id||"",trip_id:t.trip_id||"",title:t.title||"",description:t.description||"",location:t.location||"",coordinates:s,date:n,user_id:t.user_id||"",user_email:e,trip_type:"ZapOut",profile:i,notes:t.notes||"",activity_times:a,activity_types:r,requested_activities:o,budget_per_person:t.budget_per_person||"",min_budget:parseFloat(t.min_budget||"0"),max_budget:parseFloat(t.max_budget||"500"),currency:t.currency||"USD",currency_symbol:t.currency_symbol||"$",additional_needs:t.additional_needs||"",accessibility_needs:t.accessibility_needs||"",adults:t.adults||1,kids:t.kids||0}}function r(t){let e="";t.email?e=t.email:t.profile_data?.email&&(e=t.profile_data.email);let i="";if(t.stopover_cities)try{i=("string"==typeof t.stopover_cities?JSON.parse(t.stopover_cities):t.stopover_cities).map((t=>t.name)).join(" ; ")}catch(a){}return{zaproad_id:t.id,trip_id:t.trip_id||"",title:t.title||"",description:t.description||"",location:t.location||"",starting_city:t.starting_city||"",end_city:t.end_city||"",start_date:t.start_date||null,end_date:t.end_date||null,user_id:t.user_id,user_email:e,trip_type:"ZapRoad",profile:t.profile_data||{},starting_city_coordinates:t.starting_city_coordinates,stopover_cities:i,end_city_coordinates:t.end_city_coordinates,number_of_people:t.number_of_people,adults:t.adults||1,kids:t.kids||0,has_electric_car:t.has_electric_car,car_type:t.car_type||"",interests:Array.isArray(t.interests)?t.interests:[],has_pets:!0===t.has_pets,special_requirements:t.special_requirements||"",budget:"number"==typeof t.budget?t.budget:parseFloat(t.budget||"0"),currency:t.currency||"USD",currency_symbol:t.currency_symbol||"$",category:t.category||"",notes:t.notes||""}}export{a,r as b,i as p,e as s};
//# sourceMappingURL=utils-webhook.ts.CrLxl67R.js.map
