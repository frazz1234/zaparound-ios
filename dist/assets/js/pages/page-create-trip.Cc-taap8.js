import{r as e,j as t}from"../vendor/vendor-react-core.D1hcyiwY.js";import{u as o}from"../hooks/hooks-use-toast.ts.Dg8obzHg.js";import{u as r}from"../hooks/hooks-usecreatetrip.ts.DOnvkLvb.js";import{s as n}from"../components/components-admin.CiIAoamg.js";import{u as s,Z as i,S as a,A as c,P as d,L as l,T as p,a as m,b as u,C as v,c as j,d as h,e as x,f as g,R as f,g as y,h as b,i as C,j as k,k as S,l as w,F as T,m as I,v as A,r as L,n as N}from"../components/components-subtrip.iLVP8KSK.js";import{A as M}from"../components/components-auth.B-7euJmi.js";import{U as J}from"../components/components-upgrademodal.tsx.DRtUgtke.js";import{C as B,k as z,l as P,R as D,m as E,L as O,I as Z,z as _,U as q,B as F}from"../components/components-ui.C8hnNhgu.js";import{c as R}from"../components/components-blog.C3TFiFB1.js";import{u as $}from"../vendor/vendor--react-i18next.DhHVfoav.js";import{A as V}from"../vendor/vendor--framer-motion.Dpgjd5L1.js";import{bv as W,n as Y}from"../vendor/vendor--lucide-react.DRw9PYsu.js";import{u as U,a as Q}from"../vendor/vendor--react-router.Gdfmkz0l.js";import"../vendor/vendor--cookie.D-6orQ43.js";import"../utils/utils-tripcreation.ts.VnA1EOFJ.js";import"../utils/utils-webhook.ts.CrLxl67R.js";import"../utils/utils-zapoutcreation.ts.BIyobya6.js";import"../utils/utils-zaproadcreation.ts.Sn3TFOx8.js";import"../utils/utils-cache.ts.BtmNadnX.js";import"../vendor/vendor--lru-cache.CYB7PIxo.js";import"../vendor/vendor--react-hook-form.C68mK_Ba.js";import"../vendor/vendor---hookform-resolvers.CwYzTTZs.js";import"../vendor/vendor--zod.Cebk8UiH.js";import"../vendor/vendor-supabase-client.BJD0U0P8.js";import"../vendor/vendor-supabase-other.BhmW1H_P.js";import"../components/components-mobilenavigation.tsx.DtMtI5i3.js";import"../components/components-languagerouter.tsx.CHVsY7fH.js";import"../vendor/vendor--i18next.CHTa0CEF.js";import"../vendor/vendor--i18next-browser-languagedetector.h4x3AYwK.js";import"../vendor/vendor--i18next-http-backend.DjHzioAf.js";import"../hooks/hooks-useuserrole.ts.BKHSjdY6.js";import"../components/components-languageselector.tsx.x8buceJ0.js";import"../components/components-navigation.CB-8LlfF.js";import"../components/components-theme-toggle.tsx.CfzjOSrj.js";import"../components/components-theme-provider.tsx.Cd7zUHTE.js";import"../vendor/vendor-supabase-realtime.PMyDaGD3.js";import"../vendor/vendor--sonner.ECaEf7Ie.js";import"../vendor/vendor-react-dom.BnDkh-2X.js";import"../vendor/vendor-react-scheduler.B5Ht9ZB3.js";import"../hooks/hooks-useadminauth.ts.BJ7uhFTt.js";import"../components/components-trips.Ce9sOLST.js";import"../vendor/vendor--date-fns.BbAlDtqN.js";import"../vendor/vendor---hcaptcha-react-hcaptcha.BYNRmVb_.js";import"../vendor/vendor---babel-runtime.29jaxZcp.js";import"../vendor/vendor---hcaptcha-loader.BERPTLmz.js";import"../vendor/vendor--react-google-recaptcha.BxiZqK6Z.js";import"../vendor/vendor--prop-types.BR85GANi.js";import"../vendor/vendor--react-async-script.CxxufyF-.js";import"../vendor/vendor--hoist-non-react-statics.H5fJKcqv.js";import"../vendor/vendor-ui-toast.CyvsGWN1.js";import"../vendor/vendor-ui-core.CPnW5LH0.js";import"../vendor/vendor--aria-hidden.BHUiN-rI.js";import"../vendor/vendor--react-remove-scroll.DR6iVcCg.js";import"../vendor/vendor--tslib.Bc9CN1Ef.js";import"../vendor/vendor--react-remove-scroll-bar.Dz-JErv0.js";import"../vendor/vendor--react-style-singleton.ER5nEGYx.js";import"../vendor/vendor--get-nonce.BYiZHLe3.js";import"../vendor/vendor--use-sidecar.svB0tWl8.js";import"../vendor/vendor--use-callback-ref.Dt9orvWx.js";import"../vendor/vendor---floating-ui-react-dom.gDT63CuY.js";import"../vendor/vendor---floating-ui-dom.CdGDzP9A.js";import"../vendor/vendor---floating-ui-core.D6mclMLM.js";import"../vendor/vendor---floating-ui-utils.D9HCu73I.js";import"../vendor/vendor-ui-dialog.CY7OxuK6.js";import"../vendor/vendor-ui-utils.CjDQ2U02.js";import"../vendor/vendor-ui-tooltip.n7I39vTs.js";import"../vendor/vendor--embla-carousel-react.Bc6nB0ya.js";import"../vendor/vendor--embla-carousel-reactive-utils.BIRN7lq8.js";import"../vendor/vendor--embla-carousel.clUl8sxa.js";import"../vendor/vendor--cmdk.q6oiTfmV.js";import"../vendor/vendor--react-day-picker.D6HWAs9M.js";import"../utils/utils-blogutils.ts.CpQs8y27.js";import"../components/components-optimizedimage.tsx.DVN-Ynzu.js";import"../hooks/hooks-useblogs.ts.B-jKAetY.js";import"../vendor/vendor-query-main.DFU6mXji.js";import"../vendor/vendor---tanstack-query-core.CIZi0Zbo.js";import"../vendor/vendor--lodash.D80NHDHN.js";import"../vendor/vendor--react-markdown.C_e4o-CH.js";import"../vendor/vendor--devlop.Cl3hj7Sz.js";import"../vendor/vendor--unified.ti5-l0IV.js";import"../vendor/vendor--bail.gCPcOVbC.js";import"../vendor/vendor--extend.BFvm699q.js";import"../vendor/vendor--is-plain-obj.DeEdtHJQ.js";import"../vendor/vendor--trough.zzWXwSIo.js";import"../vendor/vendor--vfile.Cn6Vy3Ir.js";import"../vendor/vendor--vfile-message.Re42m5o3.js";import"../vendor/vendor--unist-util-stringify-position.CvSG9YTx.js";import"../vendor/vendor--remark-parse.DdoJrvcY.js";import"../vendor/vendor--mdast-util-from-markdown.DI8nvaYJ.js";import"../vendor/vendor--micromark-util-decode-numeric-character-reference.DA7xEauU.js";import"../vendor/vendor--micromark-util-decode-string.BCF2SQ7o.js";import"../vendor/vendor--decode-named-character-reference.C-EXV6yX.js";import"../vendor/vendor--micromark-util-normalize-identifier.CzKtq1sx.js";import"../vendor/vendor--micromark.aJPyxAJv.js";import"../vendor/vendor--micromark-util-combine-extensions.CQDa_SAq.js";import"../vendor/vendor--micromark-util-chunked.3k3e5hER.js";import"../vendor/vendor--micromark-factory-space.CZc9TqN4.js";import"../vendor/vendor--micromark-util-character.DUwsRT9L.js";import"../vendor/vendor--micromark-core-commonmark.yO25BTZZ.js";import"../vendor/vendor--micromark-util-classify-character.x6FlXUUS.js";import"../vendor/vendor--micromark-util-resolve-all.U8fstr8o.js";import"../vendor/vendor--micromark-util-subtokenize.BfHYzAYP.js";import"../vendor/vendor--micromark-factory-destination.pZKs7oL9.js";import"../vendor/vendor--micromark-factory-label.BbusvwMx.js";import"../vendor/vendor--micromark-factory-title.BBtcOUHM.js";import"../vendor/vendor--micromark-factory-whitespace.BhZ6YKME.js";import"../vendor/vendor--micromark-util-html-tag-name.DbKNfynz.js";import"../vendor/vendor--mdast-util-to-string.Ck87fAyN.js";import"../vendor/vendor--remark-rehype.B9Xnklpv.js";import"../vendor/vendor--mdast-util-to-hast.C2F2cLDR.js";import"../vendor/vendor---ungap-structured-clone.DadG6O39.js";import"../vendor/vendor--micromark-util-sanitize-uri.BXHzaaAi.js";import"../vendor/vendor--unist-util-position.CVUg9P9R.js";import"../vendor/vendor--trim-lines.C03Dth7Y.js";import"../vendor/vendor--unist-util-visit.41WSH7so.js";import"../vendor/vendor--unist-util-visit-parents.DAGCrDnu.js";import"../vendor/vendor--unist-util-is.C5Jwnfs7.js";import"../vendor/vendor--hast-util-to-jsx-runtime.BOWXXjuU.js";import"../vendor/vendor--comma-separated-tokens.DIu3lqJt.js";import"../vendor/vendor--property-information.Dc64tFtG.js";import"../vendor/vendor--space-separated-tokens.C97BfSlU.js";import"../vendor/vendor--style-to-js.DQsO4XA8.js";import"../vendor/vendor--style-to-object.DGZeIPGP.js";import"../vendor/vendor--inline-style-parser.BFz9PO4J.js";import"../vendor/vendor--hast-util-whitespace.DlJMGLAz.js";import"../vendor/vendor--estree-util-is-identifier-name.0h9-8Xae.js";import"../vendor/vendor--html-url-attributes.BA_i5Yxb.js";import"../vendor/vendor--react-helmet-async.BMUx00aU.js";import"../vendor/vendor--react-fast-compare.4d-J074I.js";import"../vendor/vendor--invariant.D6mx6rc7.js";import"../vendor/vendor--shallowequal.BwnEDCFe.js";import"../vendor/vendor--web-vitals.C1BoAgs7.js";import"../vendor/vendor--motion-dom.C5KZPrWP.js";import"../vendor/vendor--motion-utils.DAP8mxSY.js";const G=e.memo((({session:G,onTripCreated:H,embedded:X=!1})=>{const{t:K}=$("home"),{currencies:ee}=s(),{toast:te}=o(),{createTrip:oe}=r(),re=U(),{lang:ne}=Q(),se=e.useRef(null),ie=()=>{X?window.dispatchEvent(new CustomEvent("trip-step-changed",{detail:{step:ve}})):window.scrollTo({top:0,behavior:"smooth"})},ae=()=>{se.current&&(se.current.focus(),se.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},[ce,de]=e.useState(""),[le,pe]=e.useState([0,0]),[me,ue]=e.useState(!1),[ve,je]=e.useState("activity"),[he,xe]=e.useState(null),[ge,fe]=e.useState([]),[ye,be]=e.useState(void 0),[Ce,ke]=e.useState(),[Se,we]=e.useState(!1),[Te,Ie]=e.useState(""),[Ae,Le]=e.useState([]),[Ne,Me]=e.useState([]),[Je,Be]=e.useState(""),[ze,Pe]=e.useState([0,0]),[De,Ee]=e.useState(null),[Oe,Ze]=e.useState(!1),[_e,qe]=e.useState(!1),[Fe,Re]=e.useState(!1),[$e,Ve]=e.useState(null),[We,Ye]=e.useState(1),[Ue,Qe]=e.useState(0),[Ge,He]=e.useState(""),[Xe,Ke]=e.useState(!1),[et,tt]=e.useState(!1),[ot,rt]=e.useState("ZAPTRIP"),[nt,st]=e.useState(!1),[it,at]=e.useState(!1),[ct,dt]=e.useState(!1),[lt,pt]=e.useState(""),[mt,ut]=e.useState([0,0]),[vt,jt]=e.useState(""),[ht,xt]=e.useState(!1),[gt,ft]=e.useState(!1),[yt,bt]=e.useState("USD"),[Ct,kt]=e.useState("$"),[St,wt]=e.useState(!1),[Tt,It]=e.useState(""),[At,Lt]=e.useState([0,0]),[Nt,Mt]=e.useState([]),[Jt,Bt]=e.useState(""),[zt,Pt]=e.useState([0,0]),[Dt,Et]=e.useState(!1),[Ot,Zt]=e.useState(!1),[_t,qt]=e.useState(null),[Ft,Rt]=e.useState(1),[$t,Vt]=e.useState(0),[Wt,Yt]=e.useState(null),[Ut,Qt]=e.useState(null),[Gt,Ht]=e.useState([]),[Xt,Kt]=e.useState(""),[eo,to]=e.useState(""),[oo,ro]=e.useState(""),[no,so]=e.useState([]),[io,ao]=e.useState(!1),[co,lo]=e.useState(!1),[po,mo]=e.useState(null);e.useEffect((()=>{const e=["/zaparound-uploads/create-trip1.webp","/zaparound-uploads/create-trip1.webp"],t=["/zaparound-uploads/create-trip2.webp","/zaparound-uploads/create-trip2.webp"],o=Math.floor(Math.random()*(me?t.length:e.length));Kt(me?t[o]:e[o])}),[me]),e.useEffect((()=>{const e=()=>{const e=window.innerWidth<768;return ue(e),e};let t;e();const o=()=>{clearTimeout(t),t=window.setTimeout((()=>{e()}),100)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),clearTimeout(t)}}),[]),e.useEffect((()=>{if(X){const e=setTimeout(ae,150);return()=>clearTimeout(e)}}),[ve,X]);e.useCallback((e=>{"tinder-date"===he||"friends"===he?be(e):ke(e)}),[he]);const uo=async()=>{if(ie(),G)try{const{data:e}=await n.from("user_roles").select("role").eq("user_id",G.user.id).single();if("nosubs"===e?.role){const e=I(he);if(!e)throw new Error("Invalid activity type");const t=await A(e);if(mo(t),0===t.remaining)return void lo(!0)}Ke(!0);const t={title:eo||`Trip to ${ce}`,description:oo||"Edit your description",location:ce,coordinates:le,startDate:"tinder-date"===he||"friends"===he?ye:Ce?.from,endDate:"tinder-date"===he||"friends"===he?ye:Ce?.to,tripType:"plan-trip"===he?"ZapTrip":"roadtrip"===he?"ZapRoad":"ZapOut",adults:"roadtrip"===he?Ft:We,kids:"roadtrip"===he?$t:Ue,transportationMode:De||void 0,accommodationType:$e||void 0,budget:Ge||"0",currency:yt||"USD",activityTimes:no};"plan-trip"===he?(t.interests=Ne,t.hasPets=Wt,t.departureLocation=Je,t.departureCoordinates=ze):"roadtrip"===he?(t.startingCity=Tt,t.startingCityCoordinates=At,t.endCity=Jt,t.endCityCoordinates=zt,t.stopoverCities=Nt,t.car_type=_t||"",t.has_electric_car="electric-car"===_t||"car"===_t&&!0===Oe,t.has_pets=!0===Wt,t.specialRequirements="",t.interests=Gt):"tinder-date"!==he&&"friends"!==he||(t.location=lt||ce,t.coordinates=mt.length?mt:le,t.activityTypes=[...ge,...Ae],t.activityTimes=no,t.minBudget=vt||"0",t.maxBudget=Ge||"100",t.currency=yt,t.currency_symbol=Ct,t.additionalNeeds="");const o=await oe(t);if(o&&o[0]&&o[0].id){if("nosubs"===e?.role){const e=I(he);e&&await L(e,o[0].id)}H?.();re(`/${ne||"en"}/dashboard`)}}catch(e){te({title:"Error",description:"Failed to create trip. Please try again."})}finally{Ke(!1)}else st(!0)},vo=e=>{bt(e);const t=ee.find((t=>t.value===e));t&&kt(t.symbol)};return t.jsxs("div",{className:R("relative w-full",X?"":"min-h-screen","flex flex-col",X?"bg-transparent":"bg-white","safe-top safe-bottom"),style:X?void 0:{backgroundImage:`url(${Xt})`},children:[!X&&t.jsx("div",{className:R("absolute inset-0","bg-black/50 backdrop-blur-[2px]","z-1")}),t.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[t.jsx(i,{show:et,type:ot}),t.jsx("div",{className:R("container mx-auto flex-1","flex flex-col","px-2 sm:px-4 md:px-6","pt-2 sm:pt-4","items-center justify-start","min-h-[60vh]","safe-left safe-right","m-0"),children:t.jsx("div",{className:R("w-full max-w-5xl mx-auto","text-center z-10","flex flex-col flex-1"),children:t.jsx(V,{mode:"popLayout",children:t.jsxs("div",{ref:se,tabIndex:-1,className:R("flex-1","flex flex-col","items-center justify-center","gap-4","overflow-y-auto","scroll-smooth","scrollbar-none","focus:outline-none"),children:["activity"===ve&&t.jsxs("div",{className:R("hero-card w-full","bg-black/30 backdrop-blur-sm","p-4 sm:p-6 rounded-xl","my-2 sm:my-4","min-h-[300px]","flex flex-col items-center justify-center gap-4"),children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(c,{selectedActivity:he,onSelectActivity:e=>{xe(e)},onNext:e=>{ie();const t=e||he;"plan-trip"===t?(rt("ZAPTRIP"),tt(!0),setTimeout((()=>{tt(!1),je("title-description")}),1500)):"tinder-date"===t||"friends"===t?(rt("ZAPOUT"),tt(!0),setTimeout((()=>{tt(!1),je("title-description")}),1500)):"roadtrip"===t&&(rt("ZAPROAD"),tt(!0),setTimeout((()=>{tt(!1),je("title-description")}),1500))},embedded:X})]}),"pet-question"===ve&&t.jsxs("div",{className:R("hero-card w-full","bg-black/30 backdrop-blur-sm","p-4 sm:p-6 rounded-xl","my-2 sm:my-4","flex flex-col items-center justify-center gap-4"),children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(d,{selectedActivity:he,onSetHasPets:e=>{Yt(e),"plan-trip"===he?je("location-picker"):"tinder-date"===he||"friends"===he?je("tinder-options"):"roadtrip"===he&&je("calendar")},onBack:()=>{je("title-description"),Yt(null)}})]}),"location-picker"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(l,{location:ce,isLoadingImage:!1,locationImage:null,locationDetails:null,onLocationChange:(e,t)=>{de(e),pe(t)},onLocationSelect:(e,t)=>{de(e),pe(t)},onBack:()=>{ie(),je("pet-question")},onContinue:()=>{ie(),je("calendar")},onCurrencyChange:vo})]}),"tinder-options"===ve&&t.jsxs("div",{className:R("hero-card w-full","bg-black/30 backdrop-blur-sm","p-4 sm:p-6 rounded-xl","my-2 sm:my-4","flex flex-col items-center justify-center gap-4"),children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(p,{selectedActivity:he,selectedTinderOptions:ge,onSelectOption:e=>{fe((t=>t.includes(e)?t.filter((t=>t!==e)):t.length<3?[...t,e]:t))},onOpenCustomActivityDialog:()=>we(!0),customActivities:Ae,onBack:()=>{ie(),je("pet-question")},onContinue:()=>{ie(),je("calendar")}})]}),"activity-time"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(m,{selectedTimes:no,onSelectTime:e=>{so((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},onBack:()=>{ie(),je("calendar")},onContinue:()=>{ie(),je("tinder-location-budget")},isHomepage:X})]}),"tinder-location-budget"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(u,{selectedActivity:"tinder-date"===he||"friends"===he?he:null,tinderLocation:lt,tinderCoordinates:mt,minBudget:vt,maxBudget:Ge,selectedCurrency:yt,currencySymbol:Ct,isTinderLocating:ht,adultCount:We,childCount:Ue,onTinderLocationChange:async(e,t)=>{pt(e),ut(t);try{const e=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${t[1]},${t[0]}.json?access_token=pk.eyJ1IjoibWlzdGVyZnJhenoiLCJhIjoiY203M2ZnM3BoMDhpMTJqcTNiYWpkamIzNyJ9.2SlcuEPIL2yCJw5TIPunVQ&types=country`),o=await e.json();if(o.features&&o.features[0]){const e=o.features[0].properties.short_code?.toUpperCase();e&&N[e]&&(bt(N[e].code),kt(N[e].symbol))}}catch(o){}},onTinderLocateMe:()=>{xt(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${o},${t}.json?access_token=pk.eyJ1IjoibWlzdGVyZnJhenoiLCJhIjoiY203M2ZnM3BoMDhpMTJqcTNiYWpkamIzNyJ9.2SlcuEPIL2yCJw5TIPunVQ&types=place`).then((e=>e.json())).then((e=>{if(e.features&&e.features[0]){const r=e.features[0].place_name;pt(r),ut([o,t])}fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${o},${t}.json?access_token=pk.eyJ1IjoibWlzdGVyZnJhenoiLCJhIjoiY203M2ZnM3BoMDhpMTJqcTNiYWpkamIzNyJ9.2SlcuEPIL2yCJw5TIPunVQ&types=country`).then((e=>e.json())).then((e=>{if(e.features&&e.features[0]){const t=e.features[0].properties.short_code?.toUpperCase();t&&N[t]&&(bt(N[t].code),kt(N[t].symbol))}})).catch((e=>{}))})).catch((e=>{})).finally((()=>{xt(!1)}))}),(e=>{xt(!1)})):xt(!1)},onMinBudgetChange:jt,onMaxBudgetChange:He,onCurrencyChange:vo,onAdultCountChange:Ye,onChildCountChange:Qe,onBack:()=>{ie(),je("activity-time")},onContinue:uo,showBudget:io,setShowBudget:ao})]}),"calendar"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(v,{selectedActivity:he,selectedDate:ye,setSelectedDate:be,dateRange:Ce,setDateRange:ke,onContinue:()=>{ie(),"roadtrip"===he?je("road-trip-vehicle"):"plan-trip"===he?je("trip-interests"):"tinder-date"!==he&&"friends"!==he||je("activity-time")},onBack:()=>{ie(),je("tinder-date"===he||"friends"===he?"tinder-options":"plan-trip"===he?"location-picker":"pet-question")},isFinalStep:!1})]}),"trip-interests"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx("div",{className:"w-full max-w-4xl mx-auto",children:t.jsx(j,{selectedTripInterests:Ne,onSelectInterest:e=>{Me((t=>t.includes(e)?t.filter((t=>t!==e)):t.length>=15?(te({title:K("interests.maxSelectionsReached"),description:K("interests.maxSelectionsDescription",{max:15}),variant:"destructive"}),t):[...t,e]))},expandedCategory:Ut,onToggleCategory:e=>Qt((t=>t===e?null:e)),maxSelections:15,onBack:()=>{ie(),je("calendar")},onContinue:()=>{0!==Ne.length?(ie(),je("travel-logistics")):te({title:K("interests.noSelections"),description:K("interests.selectAtLeastOne"),variant:"destructive"})}})})]}),"travel-logistics"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(h,{departureLocation:Je,isLocating:Fe,transportMode:De,isElectricCar:Oe,isCarpool:_e,onDepartureLocationChange:(e,t)=>{Be(e),Pe(t)},onLocateMe:()=>{Re(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${o},${t}.json?access_token=pk.eyJ1IjoibWlzdGVyZnJhenoiLCJhIjoiY203M2ZnM3BoMDhpMTJqcTNiYWpkamIzNyJ9.2SlcuEPIL2yCJw5TIPunVQ&types=place`).then((e=>e.json())).then((e=>{if(e.features&&e.features[0]){const r=e.features[0].place_name;Be(r),Pe([o,t])}})).catch((e=>{})).finally((()=>{Re(!1)}))}),(e=>{Re(!1)})):Re(!1)},onTransportModeChange:Ee,onElectricCarChange:Ze,onCarpoolChange:qe,onCurrencyChange:e=>{bt(e);const t=ee.find((t=>t.value===e));t&&kt(t.symbol)},onBack:()=>je("trip-interests"),onContinue:()=>je("accommodation")})]}),"accommodation"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(x,{accommodation:$e,onAccommodationChange:Ve,onBack:()=>{ie(),je("travel-logistics")},onContinue:()=>{ie(),je("people-budget")}})]}),"people-budget"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(g,{adultCount:We,childCount:Ue,maxBudget:Ge,selectedCurrency:yt,currencySymbol:Ct,onAdultCountChange:Ye,onChildCountChange:Qe,onMaxBudgetChange:He,onCurrencyChange:vo,onBack:()=>{ie(),je("accommodation")},onContinue:uo})]}),"road-trip-vehicle"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(f,{vehicleType:_t,isElectricCar:Oe,onVehicleTypeChange:e=>{qt(e),"car"!==e&&Ze(!1)},onElectricCarChange:Ze,onBack:()=>{ie(),je("calendar")},onContinue:()=>{ie(),je("road-trip-locations")}})]}),"road-trip-locations"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(y,{startLocation:Tt,startCoordinates:At,intermediateLocations:Nt,endLocation:Jt,endCoordinates:zt,isStartLocating:Dt,isEndLocating:Ot,onStartLocationChange:(e,t)=>{It(e),Lt(t)},onEndLocationChange:(e,t)=>{Bt(e),Pt(t)},onAddIntermediateLocation:(e,t)=>{Mt([...Nt,{name:e,coordinates:t}])},onRemoveIntermediateLocation:e=>{Mt(Nt.filter(((t,o)=>o!==e)))},onStartLocateMe:()=>{Et(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${o},${t}.json?access_token=pk.eyJ1IjoibWlzdGVyZnJhenoiLCJhIjoiY203M2ZnM3BoMDhpMTJqcTNiYWpkamIzNyJ9.2SlcuEPIL2yCJw5TIPunVQ&types=place`).then((e=>e.json())).then((e=>{if(e.features&&e.features[0]){const r=e.features[0].place_name;It(r),Lt([o,t])}})).catch((e=>{})).finally((()=>{Et(!1)}))}),(e=>{Et(!1)})):Et(!1)},onEndLocateMe:()=>{Zt(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${o},${t}.json?access_token=pk.eyJ1IjoibWlzdGVyZnJhenoiLCJhIjoiY203M2ZnM3BoMDhpMTJqcTNiYWpkamIzNyJ9.2SlcuEPIL2yCJw5TIPunVQ&types=place`).then((e=>e.json())).then((e=>{if(e.features&&e.features[0]){const r=e.features[0].place_name;Bt(r),Pt([o,t])}})).catch((e=>{})).finally((()=>{Zt(!1)}))}),(e=>{Zt(!1)})):Zt(!1)},onCurrencyChange:e=>{bt(e);const t=ee.find((t=>t.value===e));t&&kt(t.symbol)},onBack:()=>{ie(),je("road-trip-vehicle")},onContinue:()=>{ie(),je("road-trip-interests")}})]}),"road-trip-interests"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(b,{selectedRoadTripInterests:Gt,onSelectInterest:e=>{Ht((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},expandedCategory:Ut,onToggleCategory:e=>Qt((t=>t===e?null:e)),onBack:()=>{ie(),je("road-trip-locations")},onContinue:()=>{ie(),je("road-trip-details")}})]}),"road-trip-details"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsx(C,{adultCount:Ft,childCount:$t,maxBudget:Ge,selectedCurrency:yt,currencySymbol:Ct,onAdultCountChange:Rt,onChildCountChange:Vt,onMaxBudgetChange:He,onCurrencyChange:vo,onBack:()=>{ie(),je("road-trip-locations")},onContinue:uo})]}),"title-description"===ve&&t.jsxs(t.Fragment,{children:[t.jsx(a,{currentStep:ve,selectedActivity:he}),t.jsxs(B,{className:R("w-full mx-auto",me?"max-w-xs p-2 my-2":"max-w-2xl p-6 my-6","border-2","border-[#61936f] bg-black/20 shadow-xl backdrop-blur-md","rounded-2xl flex flex-col items-center justify-center"),style:{boxShadow:"0 4px 32px 0 rgba(97,147,111,0.10)"},children:[t.jsxs(z,{className:R("w-full flex flex-col items-center justify-center gap-2",me?"p-2 pb-0":"p-6 pb-0"),children:[t.jsx("div",{className:R("flex items-center justify-center rounded-full",me?"bg-white/15 p-2 w-8 h-8 mb-1":"bg-[#61936f]/10 p-3 w-12 h-12 mb-2"),children:t.jsx(W,{className:R("text-white",me?"h-5 w-5":"h-7 w-7")})}),t.jsx(P,{className:R(me?"text-xl font-bold":"text-3xl font-bold","text-white text-center"),children:K("form.titleDescription.title")}),t.jsx(D,{className:R(me?"text-sm":"text-lg","text-white/80 text-center"),children:K("form.titleDescription.subtitle")})]}),t.jsxs(E,{className:R("w-full flex flex-col items-center justify-center",me?"gap-3 p-2":"gap-6 p-6"),children:[t.jsxs("div",{className:R("w-full",me?"space-y-1":"space-y-2"),children:[t.jsx(O,{htmlFor:"title",className:R("block text-white",me?"text-base text-left":"text-lg text-center"),children:K("form.titleDescription.titleLabel")}),t.jsx(Z,{id:"title",value:eo,onChange:e=>to(e.target.value),placeholder:K("form.titleDescription.titlePlaceholder"),className:R("w-full border-2 bg-white/95 backdrop-blur-sm",me?"py-2 px-2 text-base":"py-4 px-4 text-lg","rounded-lg focus:ring-[#61936f] focus:border-[#61936f]",eo.trim()?"border-[#61936f]":"border-[#e0e0e0]","transition-all duration-300 placeholder:text-gray-400")})]}),t.jsxs("div",{className:R("w-full",me?"space-y-1":"space-y-2"),children:[t.jsx(O,{htmlFor:"description",className:R("block text-white",me?"text-base text-left":"text-lg text-center"),children:K("form.titleDescription.descriptionLabel")}),t.jsx(_,{id:"description",value:oo,onChange:e=>ro(e.target.value),placeholder:K("form.titleDescription.descriptionPlaceholder"),className:R("w-full min-h-[80px] border-2 bg-white/95 backdrop-blur-sm",me?"py-2 px-2 text-base":"py-4 px-4","rounded-lg focus:ring-[#61936f] focus:border-[#61936f]",oo.trim()?"border-[#61936f]":"border-[#e0e0e0]","transition-all duration-300 placeholder:text-gray-400")})]})]}),t.jsxs(q,{className:R("w-full flex justify-center items-center",me?"gap-2 p-2 flex-col mt-2":"gap-4 p-6 flex-row mt-4"),children:[t.jsxs(F,{type:"button",variant:"ghost",onClick:()=>je("activity"),className:R("text-[#61936f] hover:text-white hover:bg-[#61936f]/80 border border-[#61936f]","transition-all duration-200"),children:[t.jsx(Y,{className:"w-4 h-4 mr-2"}),K("form.back")]}),t.jsx(F,{type:"button",onClick:()=>{eo.trim()?"plan-trip"===he||"roadtrip"===he?je("pet-question"):"tinder-date"!==he&&"friends"!==he||je("pet-question"):te({title:K("form.titleDescription.titleRequired"),description:K("form.titleDescription.titleRequired"),variant:"destructive"})},disabled:!eo.trim(),className:R(me?"px-4 py-3 rounded-lg text-base min-w-[120px]":"px-8 py-4 rounded-xl text-lg min-w-[200px]","font-medium bg-[#61936f] hover:bg-[#4a7256] text-white","shadow-lg shadow-[#61936f]/20 hover:shadow-xl hover:shadow-[#61936f]/30","transform transition-all duration-300 hover:scale-[1.02]",!eo.trim()&&"opacity-50 cursor-not-allowed"),children:K("form.next")})]})]})]})]})})})}),t.jsx(k,{isOpen:Se,onOpenChange:we,customActivity:Te,onCustomActivityChange:Ie,onAddCustomActivity:()=>{Te.trim()&&(Le((e=>[...e,Te.trim()])),Ie(""),we(!1))}}),t.jsx(S,{isOpen:Xe,onOpenChange:Ke,type:"trip"}),t.jsx(S,{isOpen:gt,onOpenChange:ft,type:"date"}),t.jsx(S,{isOpen:St,onOpenChange:wt,type:"groupActivity"}),t.jsx(M,{isOpen:nt,onClose:()=>st(!1),onSuccess:()=>{ie(),at(!0)},title:K("authModal.createTitle"),description:K("authModal.createDescription"),defaultTab:"signup"}),t.jsx(w,{isOpen:it,onOpenChange:at,onProfileCreated:()=>{at(!1),setTimeout((()=>{uo()}),300)}}),t.jsx(J,{isOpen:ct,onClose:()=>dt(!1)}),t.jsx(T,{isOpen:co,onClose:()=>lo(!1),onUpgrade:()=>{lo(!1),dt(!0)},remaining:po?.remaining??null,nextReset:po?.next_reset??null,tripType:I(he)??"zaptrip"})]})]})}));G.displayName="CreateTrip";export{G as default};
//# sourceMappingURL=page-create-trip.Cc-taap8.js.map
