{"version":3,"file":"page-travelflight.CmtcsUj4.js","sources":["../../../../src/pages/TravelFlight.tsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { SEO } from \"@/components/SEO\";\nimport { useTranslation } from \"react-i18next\";\nimport { Loader2, AlertCircle, RefreshCw, Plane, Search, Zap } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useSearchParams, useNavigate, useLocation } from \"react-router-dom\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { Badge } from \"@/components/ui/badge\";\n\nconst LOCALE_MAP: Record<string, string> = { en: \"en_US\", fr: \"fr_FR\", es: \"es_ES\" };\n\nexport default function TravelFlight() {\n  const { t, i18n } = useTranslation(\"travelFlight\");\n  const locale = LOCALE_MAP[i18n.language] || \"en_US\";\n  const language = i18n.language || \"en\";\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  // Ensure we start at the top on client-side navigation to this page\n  useEffect(() => {\n    window.scrollTo({ top: 0, left: 0, behavior: 'instant' as ScrollBehavior });\n  }, []);\n  \n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [retryCount, setRetryCount] = useState(0);\n  const [showFallback, setShowFallback] = useState(false);\n  const [widgetLoaded, setWidgetLoaded] = useState(false);\n  const isClientNavigation = useRef(false);\n  const previousLocation = useRef<string | null>(null);\n\n  // Detect client-side navigation and force widget reinitialization (safe, non-deprecated)\n  useEffect(() => {\n    const currentPath = location.pathname + location.search;\n\n    let navType: string | number | undefined;\n    try {\n      const navEntries = (performance && (performance as any).getEntriesByType)\n        ? (performance.getEntriesByType('navigation') as any[])\n        : [];\n      navType = navEntries[0]?.type || (performance as any)?.navigation?.type;\n    } catch {\n      navType = undefined;\n    }\n\n    const isDirectAccess = !previousLocation.current ||\n      navType === 'reload' ||\n      navType === 'back_forward' ||\n      (document.referrer && new URL(document.referrer).origin !== window.location.origin);\n\n    if (previousLocation.current && previousLocation.current !== currentPath) {\n      console.log('Client-side navigation detected, forcing widget reinitialization');\n      isClientNavigation.current = true;\n      setRetryCount(prev => prev + 1);\n    } else if (isDirectAccess) {\n      console.log('Direct URL access detected, normal widget loading');\n      isClientNavigation.current = false;\n    }\n\n    previousLocation.current = currentPath;\n  }, [location]);\n\n  // Fallback search form state\n  const [origin, setOrigin] = useState(searchParams.get('origin') || '');\n  const [destination, setDestination] = useState(searchParams.get('destination') || '');\n  const [departureDate, setDepartureDate] = useState<Date | undefined>(\n    searchParams.get('departureDate') ? new Date(searchParams.get('departureDate')!) : undefined\n  );\n  const [returnDate, setReturnDate] = useState<Date | undefined>(\n    searchParams.get('returnDate') ? new Date(searchParams.get('returnDate')!) : undefined\n  );\n  const [tripType, setTripType] = useState<'roundtrip' | 'oneway'>(\n    (searchParams.get('tripType') as 'roundtrip' | 'oneway') || 'roundtrip'\n  );\n  const [isDepartureDateOpen, setIsDepartureDateOpen] = useState(false);\n  const [isReturnDateOpen, setIsReturnDateOpen] = useState(false);\n\n  // Ensure the external script is added and properly loaded\n  useEffect(() => {\n    let timeoutId: NodeJS.Timeout;\n    let scriptElement: HTMLScriptElement | null = null;\n\n    const removeTpwlScriptsAndGlobals = () => {\n      const existingWidgetScripts = Array.from(\n        document.querySelectorAll('script[src^=\"https://tpwgts.com/wl_web/main.js\"]')\n      );\n      existingWidgetScripts.forEach((s) => {\n        try { s.parentElement?.removeChild(s); } catch {}\n      });\n      try { delete (window as any).tpwl; } catch {}\n      try { delete (window as any).travelpayouts; } catch {}\n      try { delete (window as any).TPWL_CONFIGURATION; } catch {}\n      (window as any).__TPWL_SCRIPT_ADDED = false;\n    };\n\n    // Removed visibility enforcement as requested\n\n    const loadWidget = async () => {\n      try {\n        setIsLoading(true);\n        setHasError(false);\n        setShowFallback(false);\n        setWidgetLoaded(false);\n\n        // Force widget reinitialization by clearing any existing widget content\n        const searchContainer = document.getElementById('tpwl-search');\n        const ticketsContainer = document.getElementById('tpwl-tickets');\n        if (searchContainer) searchContainer.innerHTML = '';\n        if (ticketsContainer) ticketsContainer.innerHTML = '';\n\n        // Always ensure a clean slate; external library can cache state across navigations\n        removeTpwlScriptsAndGlobals();\n        // Small delay to ensure cleanup settles\n        await new Promise(resolve => setTimeout(resolve, 50));\n        isClientNavigation.current = false;\n\n        // Build TPWL configuration from URL params\n        const getTpwlConfigFromUrl = () => {\n          const p = new URLSearchParams(window.location.search);\n\n          const buildISODate = (ddmm: string): string | undefined => {\n            if (!/^\\d{4}$/.test(ddmm)) return undefined;\n            const dd = parseInt(ddmm.slice(0, 2), 10);\n            const mm = parseInt(ddmm.slice(2, 4), 10);\n            if (dd < 1 || dd > 31 || mm < 1 || mm > 12) return undefined;\n            const today = new Date();\n            const year = today.getFullYear();\n            const candidate = new Date(year, mm - 1, dd);\n            // if already past, roll to next year\n            const finalDate = candidate < today ? new Date(year + 1, mm - 1, dd) : candidate;\n            return `${finalDate.getFullYear()}-${String(mm).padStart(2, '0')}-${String(dd).padStart(2, '0')}`;\n          };\n\n          const parseFlightSearch = (value: string | null) => {\n            if (!value) return null;\n            const s = value.trim().toUpperCase();\n            // Expected patterns:\n            // ORG(3) + DEPART(4 ddmm) + DST(3) + RETURN(4 ddmm) + PAX(1)\n            // OR oneway: ORG(3) + DEPART(4) + DST(3) + PAX(1)\n            if (s.length < 11) return null;\n            const origin_iata = s.slice(0, 3);\n            const depart_ddmm = s.slice(3, 7);\n            const destination_iata = s.slice(7, 10);\n            let return_ddmm: string | undefined;\n            let paxChar: string;\n            if (s.length >= 15) {\n              return_ddmm = s.slice(10, 14);\n              paxChar = s.slice(14);\n            } else {\n              paxChar = s.slice(10);\n            }\n            const adults = Math.max(1, parseInt(paxChar, 10) || 1);\n            const depart_date = buildISODate(depart_ddmm);\n            const return_date = return_ddmm ? buildISODate(return_ddmm) : undefined;\n            return { origin_iata, destination_iata, depart_date, return_date, adults };\n          };\n\n          // Prefer compact param if provided\n          const compact = parseFlightSearch(p.get('flightSearch'));\n\n          // Legacy/explicit params\n          const originIata = (p.get('origin_iata') || p.get('origin') || '').toUpperCase();\n          const destinationIata = (p.get('destination_iata') || p.get('destination') || '').toUpperCase();\n          const departDate = p.get('depart_date') || p.get('departureDate') || '';\n          const returnDate = p.get('return_date') || p.get('returnDate') || '';\n          const adults = parseInt(p.get('adults') || '1', 10);\n          const children = parseInt(p.get('children') || '0', 10);\n          const infants = parseInt(\n            p.get('infants') || String(parseInt(p.get('infantsInSeat') || '0', 10) + parseInt(p.get('infantsOnLap') || '0', 10)),\n            10\n          );\n          const cabin = (p.get('cabinClass') || 'economy').toLowerCase();\n          const tripClass = p.get('trip_class') || (cabin === 'economy' ? 'Y' : cabin === 'premium' ? 'W' : cabin === 'business' ? 'C' : cabin === 'first' ? 'F' : 'Y');\n\n          const search: any = {};\n          if (compact) {\n            Object.assign(search, compact);\n          } else {\n            if (originIata) search.origin_iata = originIata;\n            if (destinationIata) search.destination_iata = destinationIata;\n            if (departDate) search.depart_date = departDate;\n            if (returnDate) search.return_date = returnDate;\n            if (adults) search.adults = adults;\n            if (children) search.children = children;\n            if (infants) search.infants = infants;\n          }\n          if (tripClass) search.trip_class = tripClass;\n\n          return {\n            ...(window as any).TPWL_CONFIGURATION,\n            resultsURL: `${window.location.origin}/${i18n.language}/travel-flight`,\n            ...(Object.keys(search).length > 0 ? { search } : {}),\n          };\n        };\n\n        // If a script is already present (e.g., due to StrictMode double-invoke), avoid re-adding\n        const alreadyHasScript = document.querySelector(\n          'script[src=\"https://tpwgts.com/wl_web/main.js?wl_id=396\"]'\n        );\n\n        // Set configuration BEFORE loading the script so it can pick it up\n        (window as any).TPWL_CONFIGURATION = getTpwlConfigFromUrl();\n\n        if (!(window as any).__TPWL_SCRIPT_ADDED && !alreadyHasScript) {\n          // Create and load the script once\n          (window as any).__TPWL_SCRIPT_ADDED = true; // set early to avoid race in StrictMode\n          scriptElement = document.createElement(\"script\");\n          scriptElement.async = true;\n          scriptElement.type = \"module\";\n          scriptElement.src = \"https://tpwgts.com/wl_web/main.js?wl_id=396\";\n          scriptElement.setAttribute(\"data-noptimize\", \"1\");\n          scriptElement.setAttribute(\"data-cfasync\", \"false\");\n          scriptElement.setAttribute(\"data-wpfc-render\", \"false\");\n          \n          scriptElement.addEventListener('load', triggerWidgetInit);\n          scriptElement.addEventListener('error', handleScriptError);\n          \n          document.head.appendChild(scriptElement);\n          console.log('Widget script appended to DOM with TPWL_CONFIGURATION:', (window as any).TPWL_CONFIGURATION);\n        } else {\n          // Script already present; try initializing directly\n          console.log('TPWL script already present; attempting direct initialization');\n          setTimeout(triggerWidgetInit, 300);\n        }\n\n        // Set a timeout to prevent infinite loading\n        timeoutId = setTimeout(() => {\n          if (isLoading) {\n            handleScriptError(new Error('Widget loading timeout'));\n          }\n        }, 15000); // 15 second timeout\n\n      } catch (error) {\n        console.error('Error loading travel widget:', error);\n        handleScriptError(error);\n      }\n    };\n\n    const triggerWidgetInit = () => {\n      // Clear timeout since script loaded successfully\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n\n      console.log('Script loaded, starting widget initialization...');\n\n      // More robust widget detection and initialization\n      const checkWidgetInitialization = () => {\n        const searchContainer = document.getElementById('tpwl-search');\n        const ticketsContainer = document.getElementById('tpwl-tickets');\n        \n        console.log('Checking widget containers:', {\n          searchContainer: !!searchContainer,\n          ticketsContainer: !!ticketsContainer,\n          searchChildren: searchContainer?.children?.length || 0,\n          ticketsChildren: ticketsContainer?.children?.length || 0\n        });\n\n        // Check for various indicators that the widget is loaded\n        const hasWidgetContent = \n          (searchContainer && searchContainer.children.length > 0) ||\n          (ticketsContainer && ticketsContainer.children.length > 0) ||\n          document.querySelector('[class*=\"tpwl\"]') !== null ||\n          document.querySelector('[id*=\"tpwl\"]') !== null ||\n          document.querySelector('[class*=\"travelpayouts\"]') !== null ||\n          document.querySelector('[class*=\"skyscanner\"]') !== null;\n\n        if (hasWidgetContent) {\n          console.log('Widget content detected, hiding loading state');\n          setIsLoading(false);\n          setWidgetLoaded(true);\n          passUrlParamsToWidget();\n          // Nudge layout engines in case the widget needs a resize to become visible\n          try { window.dispatchEvent(new Event('resize')); } catch {}\n          setTimeout(() => { try { window.dispatchEvent(new Event('resize')); } catch {} }, 500);\n          return true;\n        }\n\n        return false;\n      };\n\n      // Try multiple times with increasing delays\n      let attempts = 0;\n      const maxAttempts = 10;\n      \n      const attemptWidgetInit = () => {\n        attempts++;\n        console.log(`Widget initialization attempt ${attempts}/${maxAttempts}`);\n        \n        if (checkWidgetInitialization()) {\n          return; // Widget found, stop trying\n        }\n        \n        if (attempts >= maxAttempts) {\n          console.log('Max attempts reached, showing widget anyway');\n          setIsLoading(false);\n          setWidgetLoaded(true);\n          passUrlParamsToWidget();\n          return;\n        }\n        \n        // Try again with exponential backoff\n        const delay = Math.min(1000 * Math.pow(1.5, attempts - 1), 5000);\n        setTimeout(attemptWidgetInit, delay);\n      };\n\n      // Start the initialization process\n      setTimeout(attemptWidgetInit, 500);\n\n      // Also set up a continuous check for the widget\n      const continuousCheck = setInterval(() => {\n        if (!widgetLoaded && !isLoading && !hasError) {\n          const searchContainer = document.getElementById('tpwl-search');\n          const ticketsContainer = document.getElementById('tpwl-tickets');\n          \n          const hasWidgetContent = \n            (searchContainer && searchContainer.children.length > 0) ||\n            (ticketsContainer && ticketsContainer.children.length > 0) ||\n            document.querySelector('[class*=\"tpwl\"]') !== null ||\n            document.querySelector('[id*=\"tpwl\"]') !== null ||\n            document.querySelector('[class*=\"travelpayouts\"]') !== null ||\n            document.querySelector('[class*=\"skyscanner\"]') !== null;\n\n          if (hasWidgetContent) {\n            console.log('Widget detected in continuous check');\n            setWidgetLoaded(true);\n            clearInterval(continuousCheck);\n            try { window.dispatchEvent(new Event('resize')); } catch {}\n          }\n        }\n      }, 2000); // Check every 2 seconds\n\n      // Clean up the continuous check after 30 seconds\n      setTimeout(() => {\n        clearInterval(continuousCheck);\n      }, 30000);\n    };\n\n    const passUrlParamsToWidget = () => {\n      // Extract search parameters from URL\n      const origin = searchParams.get('origin');\n      const destination = searchParams.get('destination');\n      const departureDate = searchParams.get('departureDate');\n      const returnDate = searchParams.get('returnDate');\n      const adults = searchParams.get('adults');\n      const children = searchParams.get('children');\n      const infantsInSeat = searchParams.get('infantsInSeat');\n      const infantsOnLap = searchParams.get('infantsOnLap');\n      const cabinClass = searchParams.get('cabinClass');\n      const tripType = searchParams.get('tripType');\n\n      // If we have search parameters, try to pass them to the widget\n      if (origin && destination && departureDate) {\n        console.log('Passing search parameters to widget:', {\n          origin, destination, departureDate, returnDate, adults, children, cabinClass, tripType\n        });\n\n        // Try to trigger a search in the widget if it supports it\n        // This is a fallback approach - the widget might handle URL parameters automatically\n        setTimeout(() => {\n          // Look for search form elements in the widget and populate them\n          const originInput = document.querySelector('input[placeholder*=\"From\"], input[placeholder*=\"Origin\"], input[name*=\"origin\"]') as HTMLInputElement;\n          const destinationInput = document.querySelector('input[placeholder*=\"To\"], input[placeholder*=\"Destination\"], input[name*=\"destination\"]') as HTMLInputElement;\n          const dateInput = document.querySelector('input[type=\"date\"], input[placeholder*=\"Date\"]') as HTMLInputElement;\n\n          if (originInput) {\n            originInput.value = origin;\n            originInput.dispatchEvent(new Event('input', { bubbles: true }));\n          }\n          if (destinationInput) {\n            destinationInput.value = destination;\n            destinationInput.dispatchEvent(new Event('input', { bubbles: true }));\n          }\n          if (dateInput && departureDate) {\n            dateInput.value = departureDate;\n            dateInput.dispatchEvent(new Event('input', { bubbles: true }));\n          }\n        }, 2000);\n      }\n    };\n\n    const handleScriptError = (error: any) => {\n      console.error('Travel widget script error:', error);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      setIsLoading(false);\n      setHasError(true);\n      setShowFallback(true);\n    };\n\n    loadWidget();\n\n    // Cleanup function\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      if (scriptElement) {\n        scriptElement.removeEventListener('load', triggerWidgetInit);\n        scriptElement.removeEventListener('error', handleScriptError);\n        // Do not remove the script node on unmount to avoid double-add in StrictMode\n      }\n    };\n  }, [retryCount, searchParams]); // Re-run when retry count or search params change\n\n  const handleFallbackSearch = () => {\n    if (!origin || !destination || !departureDate) {\n      return;\n    }\n\n    const params = new URLSearchParams({\n      origin,\n      destination,\n      departureDate: departureDate.toISOString().split('T')[0],\n      tripType,\n      adults: '1',\n      children: '0',\n      infantsInSeat: '0',\n      infantsOnLap: '0',\n      cabinClass: 'economy'\n    });\n\n    if (tripType === 'roundtrip' && returnDate) {\n      params.append('returnDate', returnDate.toISOString().split('T')[0]);\n    }\n\n    // Navigate to the internal booking system as fallback\n    navigate(`/${i18n.language}/booking/internal-flights?${params.toString()}`);\n  };\n\n  const handleManualWidgetTrigger = () => {\n    console.log('Manual widget trigger activated');\n    setRetryCount(prev => prev + 1);\n    \n    // Also try to force widget detection immediately\n    const searchContainer = document.getElementById('tpwl-search');\n    const ticketsContainer = document.getElementById('tpwl-tickets');\n    \n    const hasWidgetContent = \n      (searchContainer && searchContainer.children.length > 0) ||\n      (ticketsContainer && ticketsContainer.children.length > 0) ||\n      document.querySelector('[class*=\"tpwl\"]') !== null ||\n      document.querySelector('[id*=\"tpwl\"]') !== null ||\n      document.querySelector('[class*=\"travelpayouts\"]') !== null ||\n      document.querySelector('[class*=\"skyscanner\"]') !== null;\n\n    if (hasWidgetContent) {\n      console.log('Widget found in manual trigger');\n      setWidgetLoaded(true);\n    }\n  };\n\n  return (\n    <>\n      <SEO\n        title={t(\"title\", \"Cheap Flights That Make You Smile ✈️ | Compare Airfares & Travel Deals\")}\n        description={t(\n          \"description\",\n          \"Find laughably good flight deals. Compare airfares from hundreds of airlines and travel sites with ZapAround to save big on your next trip.\"\n        )}\n        keywords=\"cheap flights, flight deals, compare airfares, airline tickets, budget travel, travel comparison, flight search, travelpayouts\"\n        url={`/${language}/travel-flight`}\n        locale={locale}\n        breadcrumbs={[\n          { name: t(\"breadcrumbs.home\", \"Home\"), url: `/${language}/` },\n          { name: t(\"breadcrumbs.flights\", \"Flights\"), url: `/${language}/travel-flight` }\n        ]}\n        preconnectDomains={[\n          \"https://tpwgts.com\"\n        ]}\n        dnsPrefetch={[\n          \"https://tpwgts.com\"\n        ]}\n        structuredData={{\n          \"@context\": \"https://schema.org\",\n          \"@type\": \"TravelAction\",\n          agent: {\n            \"@type\": \"Organization\",\n            name: \"ZapAround\",\n          },\n          provider: {\n            \"@type\": \"Organization\",\n            name: \"Travelpayouts\",\n          },\n        }}\n      />\n\n      {/* Remove duplicate inline loader to prevent double init and ensure config is respected */}\n      {/* <Helmet>\n        <script\n          data-noptimize=\"1\"\n          data-cfasync=\"false\"\n          data-wpfc-render=\"false\"\n          type=\"text/javascript\"\n        >{`\n          (function () {\n            var script = document.createElement('script');\n            script.async = 1;\n            script.type = 'module';\n            script.src = 'https://tpwgts.com/wl_web/main.js?wl_id=396';\n            document.head.appendChild(script);\n          })();\n        `}</script>\n      </Helmet> */}\n\n      <main className=\"container mx-auto max-w-6xl px-4 py-12 md:py-20\">\n        <div className=\"text-center mb-8\">\n          <Badge variant=\"secondary\" className=\"mb-4 bg-[#61936f]/15 text-[#61936f] border-[#61936f]/30 inline-flex items-center\">\n            <Zap className=\"w-4 h-4 mr-2\" />\n            {t(\"badge\", \"Flight Finder\")}\n          </Badge>\n          <h1 className=\"text-3xl md:text-5xl font-bold text-[#030303] mb-3\">\n            {t(\"heading\", \"Deals so good, even your luggage smiles ✈️\")}\n          </h1>\n          <p className=\"text-base md:text-lg text-[#62626a] max-w-2xl mx-auto\">\n            {t(\"subheading\", \"Compare fares from hundreds of airlines and score wallet-happy tickets in seconds.\")}\n          </p>\n        </div>\n\n        {/* Loading State */}\n        {isLoading && (\n          <div className=\"flex flex-col items-center justify-center py-16 space-y-4\">\n            <Loader2 className=\"h-12 w-12 animate-spin text-[#61936f]\" />\n            <p className=\"text-lg text-[#62626a]\">Loading flight search widget...</p>\n            <p className=\"text-sm text-[#62626a]\">Please wait while we connect to our travel partners</p>\n          </div>\n        )}\n\n        {/* Error State with Fallback */}\n        {hasError && (\n          <div className=\"flex flex-col items-center justify-center py-16 space-y-4\">\n            <AlertCircle className=\"h-12 w-12 text-red-500\" />\n            <h2 className=\"text-xl font-semibold text-[#1d1d1e]\">Unable to load flight search</h2>\n            <p className=\"text-[#62626a] text-center max-w-md\">\n              We're having trouble loading the flight search widget. You can try again or use our alternative search.\n            </p>\n            <div className=\"flex gap-4\">\n              <Button \n                onClick={() => setRetryCount(prev => prev + 1)}\n                variant=\"outline\"\n              >\n                <RefreshCw className=\"h-4 w-4 mr-2\" />\n                Try Again\n              </Button>\n              <Button \n                onClick={() => setShowFallback(true)}\n                className=\"bg-[#61936f] hover:bg-[#4a7c59] text-white\"\n              >\n                <Search className=\"h-4 w-4 mr-2\" />\n                Use Alternative Search\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Widget Not Loading State */}\n        {!isLoading && !hasError && !showFallback && !widgetLoaded && (\n          <div className=\"flex flex-col items-center justify-center py-16 space-y-4\">\n            <div className=\"text-center\">\n              <h2 className=\"text-xl font-semibold text-[#1d1d1e] mb-2\">Widget Not Loading?</h2>\n              <p className=\"text-[#62626a] mb-4\">\n                If you don't see the flight search widget, try clicking the button below to manually load it.\n              </p>\n              <div className=\"flex gap-4 justify-center\">\n                <Button \n                  onClick={handleManualWidgetTrigger}\n                  className=\"bg-[#61936f] hover:bg-[#4a7c59] text-white\"\n                >\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Reload Widget\n                </Button>\n                <Button \n                  onClick={() => setShowFallback(true)}\n                  variant=\"outline\"\n                >\n                  <Search className=\"h-4 w-4 mr-2\" />\n                  Use Alternative Search\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Fallback Search Form */}\n        {showFallback && (\n          <div className=\"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8\">\n            <div className=\"text-center mb-8\">\n              <Plane className=\"h-12 w-12 text-[#61936f] mx-auto mb-4\" />\n              <h2 className=\"text-2xl font-semibold text-[#1d1d1e] mb-2\">Flight Search</h2>\n              <p className=\"text-[#62626a]\">Search for flights using our alternative booking system</p>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n              {/* Trip Type */}\n              <div className=\"lg:col-span-4 mb-4\">\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant={tripType === 'roundtrip' ? 'default' : 'outline'}\n                    onClick={() => setTripType('roundtrip')}\n                    className=\"flex-1\"\n                  >\n                    Round Trip\n                  </Button>\n                  <Button\n                    variant={tripType === 'oneway' ? 'default' : 'outline'}\n                    onClick={() => setTripType('oneway')}\n                    className=\"flex-1\"\n                  >\n                    One Way\n                  </Button>\n                </div>\n              </div>\n\n              {/* Origin */}\n              <div>\n                <label className=\"block text-sm font-medium text-[#1d1d1e] mb-2\">From</label>\n                <Input\n                  placeholder=\"Airport code (e.g., LAX)\"\n                  value={origin}\n                  onChange={(e) => setOrigin(e.target.value.toUpperCase())}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Destination */}\n              <div>\n                <label className=\"block text-sm font-medium text-[#1d1d1e] mb-2\">To</label>\n                <Input\n                  placeholder=\"Airport code (e.g., JFK)\"\n                  value={destination}\n                  onChange={(e) => setDestination(e.target.value.toUpperCase())}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Departure Date */}\n              <div>\n                <label className=\"block text-sm font-medium text-[#1d1d1e] mb-2\">Departure</label>\n                <Popover open={isDepartureDateOpen} onOpenChange={setIsDepartureDateOpen}>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !departureDate && \"text-muted-foreground\"\n                      )}\n                    >\n                      {departureDate ? format(departureDate, \"PPP\") : \"Select date\"}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={departureDate}\n                      onSelect={(date) => {\n                        setDepartureDate(date);\n                        setIsDepartureDateOpen(false);\n                        if (tripType === 'roundtrip') {\n                          setIsReturnDateOpen(true);\n                        }\n                      }}\n                      disabled={(date) => date < new Date()}\n                      initialFocus\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              {/* Return Date */}\n              {tripType === 'roundtrip' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-[#1d1d1e] mb-2\">Return</label>\n                  <Popover open={isReturnDateOpen} onOpenChange={setIsReturnDateOpen}>\n                    <PopoverTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        className={cn(\n                          \"w-full justify-start text-left font-normal\",\n                          !returnDate && \"text-muted-foreground\"\n                        )}\n                      >\n                        {returnDate ? format(returnDate, \"PPP\") : \"Select date\"}\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                      <Calendar\n                        mode=\"single\"\n                        selected={returnDate}\n                        onSelect={(date) => {\n                          setReturnDate(date);\n                          setIsReturnDateOpen(false);\n                        }}\n                        disabled={(date) => date < (departureDate || new Date())}\n                        initialFocus\n                      />\n                    </PopoverContent>\n                  </Popover>\n                </div>\n              )}\n            </div>\n\n            <div className=\"text-center\">\n              <Button \n                onClick={handleFallbackSearch}\n                disabled={!origin || !destination || !departureDate}\n                className=\"bg-[#61936f] hover:bg-[#4a7c59] text-white px-8 py-3\"\n              >\n                <Search className=\"h-5 w-5 mr-2\" />\n                Search Flights\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Travelpayouts White-Label Widgets - keep containers mounted so script can initialize */}\n        <section className={\"space-y-12\"}>\n          {/* Metasearch widget with Shadow Square */}\n          <div className=\"relative\">\n            {/* Shadow Square Background */}\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#61936f]/20 to-[#4a7c59]/20 rounded-3xl blur-2xl transform rotate-3 scale-105\"></div>\n            <div className=\"absolute inset-0 bg-gradient-to-tl from-[#10B981]/15 to-[#059669]/15 rounded-3xl blur-xl transform -rotate-2 scale-105\"></div>\n            \n            {/* Main Widget Container */}\n            <div className=\"relative bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 transform hover:scale-[1.02] transition-all duration-500 hover:shadow-3xl\">\n              {/* Inner Glow Effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-r from-[#61936f]/5 to-[#10B981]/5 rounded-3xl\"></div>\n              \n              {/* Widget Content */}\n              <div className=\"relative z-10\">\n                <div id=\"tpwl-search\"></div>\n              </div>\n              \n              {/* Decorative Corner Elements */}\n              <div className=\"absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-[#61936f]/30 rounded-tl-2xl\"></div>\n              <div className=\"absolute top-4 right-4 w-8 h-8 border-r-2 border-t-2 border-[#61936f]/30 rounded-tr-2xl\"></div>\n              <div className=\"absolute bottom-4 left-4 w-8 h-8 border-l-2 border-b-2 border-[#61936f]/30 rounded-bl-2xl\"></div>\n              <div className=\"absolute bottom-4 right-4 w-8 h-8 border-r-2 border-b-2 border-[#61936f]/30 rounded-br-2xl\"></div>\n            </div>\n          </div>\n\n          {/* Search results widget with Shadow Square */}\n          <div className=\"relative\">\n            {/* Shadow Square Background */}\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#61936f]/20 to-[#4a7c59]/20 rounded-3xl blur-2xl transform rotate-3 scale-105\"></div>\n            <div className=\"absolute inset-0 bg-gradient-to-tl from-[#10B981]/15 to-[#059669]/15 rounded-3xl blur-xl transform -rotate-2 scale-105\"></div>\n            \n            {/* Main Widget Container */}\n            <div className=\"relative bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8 transform hover:scale-[1.02] transition-all duration-500 hover:shadow-3xl\">\n              {/* Inner Glow Effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-r from-[#61936f]/5 to-[#10B981]/5 rounded-3xl\"></div>\n              \n              {/* Widget Content */}\n              <div className=\"relative z-10\">\n                <div id=\"tpwl-tickets\"></div>\n              </div>\n              \n              {/* Decorative Corner Elements */}\n              <div className=\"absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-[#61936f]/30 rounded-tl-2xl\"></div>\n              <div className=\"absolute top-4 right-4 w-8 h-8 border-r-2 border-t-2 border-[#61936f]/30 rounded-tr-2xl\"></div>\n              <div className=\"absolute bottom-4 left-4 w-8 h-8 border-l-2 border-b-2 border-[#61936f]/30 rounded-bl-2xl\"></div>\n              <div className=\"absolute bottom-4 right-4 w-8 h-8 border-r-2 border-b-2 border-[#61936f]/30 rounded-br-2xl\"></div>\n            </div>\n          </div>\n        </section>\n      </main>\n    </>\n  );\n}\n"],"names":["LOCALE_MAP","en","fr","es","TravelFlight","t","i18n","useTranslation","locale","language","searchParams","useSearchParams","navigate","useNavigate","location","useLocation","useEffect","window","scrollTo","top","left","behavior","isLoading","setIsLoading","useState","hasError","setHasError","retryCount","setRetryCount","showFallback","setShowFallback","widgetLoaded","setWidgetLoaded","isClientNavigation","useRef","previousLocation","currentPath","pathname","search","navType","navEntries","performance","getEntriesByType","type","navigation","isDirectAccess","current","document","referrer","URL","origin","prev","setOrigin","get","destination","setDestination","departureDate","setDepartureDate","Date","returnDate","setReturnDate","tripType","setTripType","isDepartureDateOpen","setIsDepartureDateOpen","isReturnDateOpen","setIsReturnDateOpen","timeoutId","scriptElement","triggerWidgetInit","clearTimeout","attempts","attemptWidgetInit","searchContainer","getElementById","ticketsContainer","children","length","querySelector","passUrlParamsToWidget","dispatchEvent","Event","setTimeout","checkWidgetInitialization","delay","Math","min","pow","continuousCheck","setInterval","clearInterval","originInput","destinationInput","dateInput","value","bubbles","handleScriptError","error","async","innerHTML","Array","from","querySelectorAll","forEach","s","parentElement","removeChild","tpwl","travelpayouts","TPWL_CONFIGURATION","__TPWL_SCRIPT_ADDED","removeTpwlScriptsAndGlobals","Promise","resolve","getTpwlConfigFromUrl","p","URLSearchParams","buildISODate","ddmm","test","dd","parseInt","slice","mm","today","year","getFullYear","candidate","String","padStart","compact","trim","toUpperCase","origin_iata","depart_ddmm","destination_iata","return_ddmm","paxChar","adults","max","depart_date","return_date","parseFlightSearch","originIata","destinationIata","departDate","infants","cabin","toLowerCase","tripClass","Object","assign","trip_class","resultsURL","keys","alreadyHasScript","createElement","src","setAttribute","addEventListener","head","appendChild","Error","loadWidget","removeEventListener","jsxs","Fragment","jsx","SEO","title","description","keywords","url","breadcrumbs","name","preconnectDomains","dnsPrefetch","structuredData","agent","provider","className","Badge","variant","Zap","Loader2","AlertCircle","Button","onClick","RefreshCw","Search","Plane","Input","placeholder","onChange","e","target","Popover","open","onOpenChange","PopoverTrigger","asChild","cn","format","PopoverContent","align","Calendar","mode","selected","onSelect","date","disabled","initialFocus","params","toISOString","split","infantsInSeat","infantsOnLap","cabinClass","append","toString","id"],"mappings":"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"}