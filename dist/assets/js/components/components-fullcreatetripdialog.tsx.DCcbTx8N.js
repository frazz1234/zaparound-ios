import{R as r,r as o,j as e}from"../vendor/vendor-react-core.D1hcyiwY.js";import{G as t,B as n,J as s,M as i,ab as d}from"./components-ui.C8hnNhgu.js";import m from"../pages/page-create-trip.Cc-taap8.js";import{c as a}from"./components-blog.C3TFiFB1.js";import"../vendor/vendor--mapbox-gl.CIg18VY7.js";import{F as v,v as p}from"./components-subtrip.iLVP8KSK.js";import{U as l}from"./components-upgrademodal.tsx.DRtUgtke.js";import{s as c}from"./components-admin.CiIAoamg.js";import{u as j}from"../vendor/vendor--react-i18next.DhHVfoav.js";import{ad as u,X as h}from"../vendor/vendor--lucide-react.DRw9PYsu.js";import"../vendor/vendor--cookie.D-6orQ43.js";import"../hooks/hooks-use-toast.ts.Dg8obzHg.js";import"../vendor/vendor-ui-toast.CyvsGWN1.js";import"../vendor/vendor-react-dom.BnDkh-2X.js";import"../vendor/vendor-react-scheduler.B5Ht9ZB3.js";import"../vendor/vendor-ui-core.CPnW5LH0.js";import"../vendor/vendor--aria-hidden.BHUiN-rI.js";import"../vendor/vendor--react-remove-scroll.DR6iVcCg.js";import"../vendor/vendor--tslib.Bc9CN1Ef.js";import"../vendor/vendor--react-remove-scroll-bar.Dz-JErv0.js";import"../vendor/vendor--react-style-singleton.ER5nEGYx.js";import"../vendor/vendor--get-nonce.BYiZHLe3.js";import"../vendor/vendor--use-sidecar.svB0tWl8.js";import"../vendor/vendor--use-callback-ref.Dt9orvWx.js";import"../vendor/vendor---floating-ui-react-dom.gDT63CuY.js";import"../vendor/vendor---floating-ui-dom.CdGDzP9A.js";import"../vendor/vendor---floating-ui-core.D6mclMLM.js";import"../vendor/vendor---floating-ui-utils.D9HCu73I.js";import"../vendor/vendor-ui-dialog.CY7OxuK6.js";import"../vendor/vendor-ui-utils.CjDQ2U02.js";import"../vendor/vendor-ui-tooltip.n7I39vTs.js";import"../vendor/vendor--embla-carousel-react.Bc6nB0ya.js";import"../vendor/vendor--embla-carousel-reactive-utils.BIRN7lq8.js";import"../vendor/vendor--embla-carousel.clUl8sxa.js";import"../vendor/vendor--cmdk.q6oiTfmV.js";import"../vendor/vendor--react-day-picker.D6HWAs9M.js";import"../vendor/vendor--date-fns.BbAlDtqN.js";import"../vendor/vendor--react-hook-form.C68mK_Ba.js";import"../hooks/hooks-usecreatetrip.ts.DOnvkLvb.js";import"../utils/utils-tripcreation.ts.VnA1EOFJ.js";import"../utils/utils-webhook.ts.CrLxl67R.js";import"../utils/utils-zapoutcreation.ts.BIyobya6.js";import"../utils/utils-zaproadcreation.ts.Sn3TFOx8.js";import"../utils/utils-cache.ts.BtmNadnX.js";import"../vendor/vendor--lru-cache.CYB7PIxo.js";import"../vendor/vendor--react-router.Gdfmkz0l.js";import"./components-auth.B-7euJmi.js";import"../vendor/vendor---hcaptcha-react-hcaptcha.BYNRmVb_.js";import"../vendor/vendor---babel-runtime.29jaxZcp.js";import"../vendor/vendor---hcaptcha-loader.BERPTLmz.js";import"../vendor/vendor--react-google-recaptcha.BxiZqK6Z.js";import"../vendor/vendor--prop-types.BR85GANi.js";import"../vendor/vendor--react-async-script.CxxufyF-.js";import"../vendor/vendor--hoist-non-react-statics.H5fJKcqv.js";import"./components-trips.Ce9sOLST.js";import"../vendor/vendor--framer-motion.Dpgjd5L1.js";import"../vendor/vendor--motion-dom.C5KZPrWP.js";import"../vendor/vendor--motion-utils.DAP8mxSY.js";import"../vendor/vendor-supabase-other.BhmW1H_P.js";import"./components-mobilenavigation.tsx.DtMtI5i3.js";import"./components-languagerouter.tsx.CHVsY7fH.js";import"../vendor/vendor--i18next.CHTa0CEF.js";import"../vendor/vendor--i18next-browser-languagedetector.h4x3AYwK.js";import"../vendor/vendor--i18next-http-backend.DjHzioAf.js";import"../hooks/hooks-useuserrole.ts.BKHSjdY6.js";import"./components-languageselector.tsx.x8buceJ0.js";import"./components-navigation.CB-8LlfF.js";import"./components-theme-toggle.tsx.CfzjOSrj.js";import"./components-theme-provider.tsx.Cd7zUHTE.js";import"../utils/utils-blogutils.ts.CpQs8y27.js";import"./components-optimizedimage.tsx.DVN-Ynzu.js";import"../hooks/hooks-useblogs.ts.B-jKAetY.js";import"../vendor/vendor-query-main.DFU6mXji.js";import"../vendor/vendor---tanstack-query-core.CIZi0Zbo.js";import"../vendor/vendor--lodash.D80NHDHN.js";import"../vendor/vendor--react-markdown.C_e4o-CH.js";import"../vendor/vendor--devlop.Cl3hj7Sz.js";import"../vendor/vendor--unified.ti5-l0IV.js";import"../vendor/vendor--bail.gCPcOVbC.js";import"../vendor/vendor--extend.BFvm699q.js";import"../vendor/vendor--is-plain-obj.DeEdtHJQ.js";import"../vendor/vendor--trough.zzWXwSIo.js";import"../vendor/vendor--vfile.Cn6Vy3Ir.js";import"../vendor/vendor--vfile-message.Re42m5o3.js";import"../vendor/vendor--unist-util-stringify-position.CvSG9YTx.js";import"../vendor/vendor--remark-parse.DdoJrvcY.js";import"../vendor/vendor--mdast-util-from-markdown.DI8nvaYJ.js";import"../vendor/vendor--micromark-util-decode-numeric-character-reference.DA7xEauU.js";import"../vendor/vendor--micromark-util-decode-string.BCF2SQ7o.js";import"../vendor/vendor--decode-named-character-reference.C-EXV6yX.js";import"../vendor/vendor--micromark-util-normalize-identifier.CzKtq1sx.js";import"../vendor/vendor--micromark.aJPyxAJv.js";import"../vendor/vendor--micromark-util-combine-extensions.CQDa_SAq.js";import"../vendor/vendor--micromark-util-chunked.3k3e5hER.js";import"../vendor/vendor--micromark-factory-space.CZc9TqN4.js";import"../vendor/vendor--micromark-util-character.DUwsRT9L.js";import"../vendor/vendor--micromark-core-commonmark.yO25BTZZ.js";import"../vendor/vendor--micromark-util-classify-character.x6FlXUUS.js";import"../vendor/vendor--micromark-util-resolve-all.U8fstr8o.js";import"../vendor/vendor--micromark-util-subtokenize.BfHYzAYP.js";import"../vendor/vendor--micromark-factory-destination.pZKs7oL9.js";import"../vendor/vendor--micromark-factory-label.BbusvwMx.js";import"../vendor/vendor--micromark-factory-title.BBtcOUHM.js";import"../vendor/vendor--micromark-factory-whitespace.BhZ6YKME.js";import"../vendor/vendor--micromark-util-html-tag-name.DbKNfynz.js";import"../vendor/vendor--mdast-util-to-string.Ck87fAyN.js";import"../vendor/vendor--remark-rehype.B9Xnklpv.js";import"../vendor/vendor--mdast-util-to-hast.C2F2cLDR.js";import"../vendor/vendor---ungap-structured-clone.DadG6O39.js";import"../vendor/vendor--micromark-util-sanitize-uri.BXHzaaAi.js";import"../vendor/vendor--unist-util-position.CVUg9P9R.js";import"../vendor/vendor--trim-lines.C03Dth7Y.js";import"../vendor/vendor--unist-util-visit.41WSH7so.js";import"../vendor/vendor--unist-util-visit-parents.DAGCrDnu.js";import"../vendor/vendor--unist-util-is.C5Jwnfs7.js";import"../vendor/vendor--hast-util-to-jsx-runtime.BOWXXjuU.js";import"../vendor/vendor--comma-separated-tokens.DIu3lqJt.js";import"../vendor/vendor--property-information.Dc64tFtG.js";import"../vendor/vendor--space-separated-tokens.C97BfSlU.js";import"../vendor/vendor--style-to-js.DQsO4XA8.js";import"../vendor/vendor--style-to-object.DGZeIPGP.js";import"../vendor/vendor--inline-style-parser.BFz9PO4J.js";import"../vendor/vendor--hast-util-whitespace.DlJMGLAz.js";import"../vendor/vendor--estree-util-is-identifier-name.0h9-8Xae.js";import"../vendor/vendor--html-url-attributes.BA_i5Yxb.js";import"../vendor/vendor--react-helmet-async.BMUx00aU.js";import"../vendor/vendor--react-fast-compare.4d-J074I.js";import"../vendor/vendor--invariant.D6mx6rc7.js";import"../vendor/vendor--shallowequal.BwnEDCFe.js";import"../vendor/vendor--web-vitals.C1BoAgs7.js";import"../vendor/vendor---hookform-resolvers.CwYzTTZs.js";import"../vendor/vendor--zod.Cebk8UiH.js";import"../vendor/vendor-supabase-client.BJD0U0P8.js";import"../vendor/vendor-supabase-realtime.PMyDaGD3.js";import"../vendor/vendor--sonner.ECaEf7Ie.js";import"../hooks/hooks-useadminauth.ts.BJ7uhFTt.js";function f({session:f,buttonVariant:g="default"}){const[x,k]=r.useState(!1),[b,w]=o.useState(!1),[y,N]=o.useState(!1),[z,C]=o.useState(null),{t:S}=j("trip"),[q,E]=o.useState(!1),[L,O]=o.useState(window.innerHeight);o.useEffect((()=>{const r=()=>{E(window.innerWidth>window.innerHeight),O(window.innerHeight)};return r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),()=>{window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}}),[]);const Z=async()=>{if(f)try{const{data:r}=await c.from("user_roles").select("role").eq("user_id",f.user.id).single();if("nosubs"===r?.role){const r=await p("zaptrip");if(C(r),0===r.remaining)return void w(!0)}k(!0)}catch(r){k(!0)}else k(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{open:x,onOpenChange:k,children:["mobile"===g?e.jsxs("button",{className:"flex flex-col items-center",onClick:Z,children:[e.jsx("div",{className:"relative",children:e.jsx(u,{className:"w-8 h-8 text-primary"})}),e.jsx("span",{className:"text-xs mt-1",children:S("form.createZap")})]}):e.jsx(n,{onClick:Z,className:a("relative px-6 py-2 bg-gradient-to-r from-[#10B981] to-[#059669] text-white border-none hover:from-[#059669] hover:to-[#047857] hover:scale-105 transition-all duration-300 shadow-lg rounded-full font-medium tracking-wide"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),S("form.createZap")]})}),e.jsxs(s,{className:a("bg-black/30 backdrop-blur-sm border shadow-lg rounded-xl overflow-hidden","p-0 gap-0","w-[98%] sm:w-[95%] md:w-[90%] lg:w-[85%] xl:w-[80%]","max-w-6xl",q?"h-[98vh] max-h-[98vh]":L<700?"h-[95vh] max-h-[95vh]":"h-[90vh] max-h-[90vh]","min-h-0","flex flex-col"),children:[e.jsx(i,{className:"sr-only",children:S("form.createZap")}),e.jsx(d,{className:"sr-only",children:S("form.description")}),e.jsx("div",{className:a("flex-1 overflow-y-auto overflow-x-hidden","scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent","p-3 sm:p-4 md:p-6","relative",L<600&&"p-2",q&&"p-2 sm:p-3"),children:e.jsx(m,{session:f,onTripCreated:()=>k(!1)})}),e.jsxs(n,{variant:"ghost",size:"icon",className:a("absolute z-50","top-2 right-2","h-8 w-8 sm:h-10 sm:w-10","bg-black/20 hover:bg-black/40","rounded-full","touch-action-manipulation","text-white hover:text-white","safe-top safe-right"),onClick:()=>k(!1),children:[e.jsx(h,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}),e.jsx(v,{isOpen:b,onClose:()=>w(!1),onUpgrade:()=>{w(!1),N(!0)},remaining:z?.remaining??null,nextReset:z?.next_reset??null,tripType:"zaptrip"}),e.jsx(l,{isOpen:y,onClose:()=>N(!1)})]})}export{f as FullCreateTripDialog};
//# sourceMappingURL=components-fullcreatetripdialog.tsx.DCcbTx8N.js.map
