import{j as e,r as s}from"../vendor/vendor-react-core.D1hcyiwY.js";import{C as a,k as t,l,m as r,R as i,U as n,I as o,p as c,q as d,r as m,s as h,t as x,B as g,V as u,W as p,G as j,J as f,K as v,M as b,N as w,O as N,P as y,X as k,Y as C,Z as _,_ as P}from"./components-ui.C8hnNhgu.js";import{s as M}from"./components-admin.CiIAoamg.js";import{g as L,c as $}from"../utils/utils-blogutils.ts.CpQs8y27.js";import"../utils/utils-cache.ts.BtmNadnX.js";import{O as z}from"./components-optimizedimage.tsx.DVN-Ynzu.js";import{u as A}from"../vendor/vendor--react-i18next.DhHVfoav.js";import{f as T}from"../vendor/vendor--date-fns.BbAlDtqN.js";import{L as R,a as B,u as F}from"../vendor/vendor--react-router.Gdfmkz0l.js";import{u as S,a as D,b as q}from"../hooks/hooks-useblogs.ts.B-jKAetY.js";import{l as E}from"../vendor/vendor--lodash.D80NHDHN.js";import{S as O,e as Z,f as V,g as I,F as U,X as W,M as H,h as J,i as K,j as Y,k as G,l as Q,C as X,R as ee,B as se,G as ae,m as te,L as le,n as re,o as ie,p as ne,q as oe,A as ce}from"../vendor/vendor--lucide-react.DRw9PYsu.js";import{A as de,m as me}from"../vendor/vendor--framer-motion.Dpgjd5L1.js";import{t as he}from"../hooks/hooks-use-toast.ts.Dg8obzHg.js";import{t as xe,c as ge}from"../vendor/vendor-ui-utils.CjDQ2U02.js";import{u as ue}from"../vendor/vendor-query-main.DFU6mXji.js";import{M as pe}from"../vendor/vendor--react-markdown.C_e4o-CH.js";import{H as je}from"../vendor/vendor--react-helmet-async.BMUx00aU.js";import{w as fe,e as ve,G as be}from"../vendor/vendor--web-vitals.C1BoAgs7.js";function we(...e){return xe(ge(e))}const Ne="zaparounds_location_cache";function ye(){const e=localStorage.getItem(Ne);if(!e)return null;const s=JSON.parse(e);return Date.now()-s.timestamp>9e5?(localStorage.removeItem(Ne),null):s}function ke(e){const s={data:e,timestamp:Date.now()};localStorage.setItem(Ne,JSON.stringify(s))}function Ce({blog:s}){const{t:o,i18n:c}=A("blog"),d=c.language,m=L(s,d);s.published_at?T(new Date(s.published_at),"PPP"):T(new Date(s.created_at),"PPP");const h=`/${d}/blog/${s.title_en?$(s.title_en):s.id}`,x="string"==typeof m.content?m.content:"";x.trim()&&x.split(/\s+/).filter((e=>e.length>0)).length;const g="string"==typeof m.title?m.title:"";return e.jsxs(a,{className:"overflow-hidden transition-all hover:shadow-lg h-full flex flex-col",children:[s.image_url&&e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx(z,{src:s.image_url,alt:g,width:400,height:225,quality:85,priority:!0,className:"w-full h-full object-cover transition-transform hover:scale-105 duration-300",onError:()=>{}})}),e.jsx(t,{className:"pb-2",children:e.jsx(l,{className:"line-clamp-2 text-xl font-bold hover:text-primary transition-colors",children:e.jsx(R,{to:h,children:g})})}),e.jsx(r,{className:"flex-grow pb-2",children:e.jsx(i,{className:"line-clamp-3 text-sm",children:m.excerpt||x&&x.substring(0,150)+"..."})}),e.jsx(n,{className:"pt-2 border-t",children:e.jsxs(R,{to:h,className:"text-primary hover:text-primary/80 font-medium text-sm flex items-center group","aria-label":`Read more about ${g}`,children:[o("card.readMore"),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})}const _e=[{value:"newest",label:"filters.newest",icon:V},{value:"oldest",label:"filters.oldest",icon:V},{value:"popular",label:"filters.popular",icon:I},{value:"trending",label:"filters.trending",icon:I}],Pe=[{value:"",label:"blog.dateRange.all"},{value:"week",label:"blog.dateRange.week"},{value:"month",label:"blog.dateRange.month"},{value:"quarter",label:"blog.dateRange.quarter"},{value:"year",label:"blog.dateRange.year"}];function Me({filters:t,onFiltersChange:l,availableCategories:i,availableTags:n,availableLocations:p,isLoading:j=!1,totalResults:f=0}){const{t:v}=A("blog"),[b,w]=s.useState(!1),[N,y]=s.useState(t.search),k=s.useCallback(E.debounce((e=>{l({...t,search:e})}),300),[t,l]),C=s.useCallback((e=>{const s=e.target.value;y(s),k(s)}),[k]),_=s.useCallback(((e,s)=>{l({...t,[e]:s})}),[t,l]),P=s.useCallback((e=>{const s=t.tags.includes(e)?t.tags.filter((s=>s!==e)):[...t.tags,e];_("tags",s)}),[t.tags,_]),M=s.useCallback((()=>{y(""),l({search:"",category:"",dateRange:"",sortBy:"newest",tags:[],location:""})}),[l]),L=s.useMemo((()=>{let e=0;return t.search&&e++,t.category&&e++,t.dateRange&&e++,t.tags.length>0&&e++,t.location&&e++,e}),[t]),$=L>0;return e.jsx(a,{className:"mb-6 border-0 shadow-sm bg-gradient-to-r from-blue-50/50 to-indigo-50/50",children:e.jsxs(r,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(o,{placeholder:v("filters.searchPlaceholder"),value:N,onChange:C,className:"pl-10 pr-4 h-10 bg-white/80 backdrop-blur-sm border-white/20 focus:bg-white",disabled:j})]}),e.jsx("div",{className:"min-w-[140px]",children:e.jsxs(c,{value:t.category,onValueChange:e=>_("category",e),disabled:j,children:[e.jsx(d,{className:"h-10 bg-white/80 backdrop-blur-sm border-white/20 focus:bg-white",children:e.jsx(m,{placeholder:v("filters.allCategories")})}),e.jsxs(h,{children:[e.jsx(x,{value:"",children:v("filters.allCategories")}),i.map((s=>e.jsx(x,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-3 w-3"}),s]})},s)))]})]})}),e.jsx("div",{className:"min-w-[120px]",children:e.jsxs(c,{value:t.sortBy,onValueChange:e=>_("sortBy",e),disabled:j,children:[e.jsx(d,{className:"h-10 bg-white/80 backdrop-blur-sm border-white/20 focus:bg-white",children:e.jsx(m,{})}),e.jsx(h,{children:_e.map((s=>{const a=s.icon;return e.jsx(x,{value:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"h-3 w-3"}),v(s.label)]})},s.value)}))})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>w(!b),className:"h-10 bg-white/80 backdrop-blur-sm border-white/20 hover:bg-white",disabled:j,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),v("filters.advanced"),L>0&&e.jsx(u,{variant:"secondary",className:"ml-2 h-5 min-w-[20px] p-1",children:L})]}),$&&e.jsx(g,{variant:"ghost",size:"sm",onClick:M,className:"h-10 text-muted-foreground hover:text-destructive",disabled:j,children:e.jsx(W,{className:"h-4 w-4"})})]})]}),e.jsx(de,{children:b&&e.jsx(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-4 border-t border-white/20 mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:v("filters.dateRange")}),e.jsxs(c,{value:t.dateRange,onValueChange:e=>_("dateRange",e),disabled:j,children:[e.jsx(d,{className:"bg-white/80",children:e.jsx(m,{})}),e.jsx(h,{children:Pe.map((s=>e.jsx(x,{value:s.value,children:v(s.label)},s.value)))})]})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:v("filters.location")}),e.jsxs(c,{value:t.location||"",onValueChange:e=>_("location",e),disabled:j,children:[e.jsx(d,{className:"bg-white/80",children:e.jsx(m,{placeholder:v("filters.allLocations")})}),e.jsxs(h,{children:[e.jsx(x,{value:"",children:v("filters.allLocations")}),p.map((s=>e.jsx(x,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-3 w-3"}),s]})},s)))]})]})]})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-2 block",children:v("filters.tags")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((s=>e.jsxs(u,{variant:t.tags.includes(s)?"default":"outline",className:"cursor-pointer hover:bg-primary/80 transition-colors",onClick:()=>P(s),children:[s,t.tags.includes(s)&&e.jsx(W,{className:"h-3 w-3 ml-1"})]},s)))})]})]})})}),f>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:v("filters.resultsFound",{count:f})}),$&&e.jsx("span",{children:v("filters.filtered")})]})})]})})}function Le({blog:l,variant:i="default",showDescription:o=!0,showAuthor:c=!0,index:d=0,className:m}){const{t:h,i18n:x}=A("blog"),p=x.language,w=L(l,p),[N,y]=s.useState(!1),[k,C]=s.useState(!1),_=s.useMemo((()=>{const e=l.published_at?new Date(l.published_at):new Date(l.created_at);return T(e,"PPP")}),[l.published_at,l.created_at]),P=`/${p}/blog/${s.useMemo((()=>l.title_en?$(l.title_en):l.id),[l.title_en,l.id])}`,M=s.useMemo((()=>{const e="string"==typeof w.content?w.content:"",s=e.trim()?e.split(/\s+/).filter((e=>e.length>0)).length:0;return Math.max(1,Math.ceil(s/200))}),[w.content]),B="string"==typeof w.title?w.title:"",F="string"==typeof w.excerpt?w.excerpt:"",S=l.image_url?l.image_url.startsWith("http")?l.image_url:`${window.location.origin}${l.image_url}`:null,D=window.location.origin+P,q=async()=>{const e=navigator.platform.toUpperCase().indexOf("MAC")>=0,s=navigator.share&&!e,a=window.location.origin+P;if(s)try{const e=h("share.mobileText",{title:B,site:"ZapAround"}),s={title:B,text:e,url:a};if(S)try{const e=await fetch(S),a=await e.blob(),t=S.match(/\.([a-zA-Z0-9]+)(?:\?|#|$)/),l=t?t[1]:"jpg",r=new File([a],`image.${l}`,{type:a.type});navigator.canShare&&navigator.canShare({files:[r]})&&(s.files=[r])}catch(t){}await navigator.share(s)}catch(l){l instanceof Error&&l.name}else y(!0)},E=async()=>{try{const e=window.location.origin+P;await navigator.clipboard.writeText(e),C(!0),he({title:h("share.linkCopied"),description:h("share.linkCopiedDescription")}),setTimeout((()=>C(!1)),2e3)}catch(e){he({title:h("share.copyError"),description:h("share.copyErrorDescription"),variant:"destructive"})}},O=e=>{const s=h("share.mobileText",{title:B,site:"ZapAround"}),a=encodeURIComponent(s),t=encodeURIComponent(D);let l="";switch(e){case"facebook":l=`https://www.facebook.com/sharer/sharer.php?u=${t}&quote=${encodeURIComponent(B)}`;break;case"twitter":l=`https://twitter.com/intent/tweet?text=${a}&url=${t}`;break;case"linkedin":l=`https://www.linkedin.com/sharing/share-offsite/?url=${t}`;break;case"whatsapp":l=`https://wa.me/?text=${a}%20${t}`;break;case"telegram":l=`https://t.me/share/url?url=${t}&text=${a}`;break;case"email":l=`mailto:?subject=${encodeURIComponent(B)}&body=${a}%0A%0A${t}`;break;default:return}window.open(l,"_blank","width=600,height=400,scrollbars=yes,resizable=yes")},I={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:.1*e,duration:.4,ease:"easeOut"}})};return"featured"===i?e.jsxs(me.div,{custom:d,initial:"hidden",animate:"visible",variants:I,className:we("group",m),children:[e.jsxs(a,{className:"overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-white to-gray-50/50",children:[e.jsxs("div",{className:"relative",children:[l.image_url&&e.jsxs("div",{className:"aspect-[16/9] lg:aspect-[21/9] overflow-hidden",children:[e.jsx(z,{src:l.image_url,alt:B,width:800,height:400,quality:90,priority:!0,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[l.category&&e.jsx(R,{to:`/${p}/blog/category/${l.category.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,onClick:e=>e.stopPropagation(),children:e.jsxs(u,{variant:"outline",className:"mb-3 border-white/30 text-white bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors cursor-pointer",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),l.category]})}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold mb-2 line-clamp-2 leading-tight",children:B}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/80",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"}),_]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),h("detail.readingTime",{time:M})]})]})]})]}),e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(R,{to:P,className:"w-full max-w-xs",children:e.jsx(g,{className:"w-full",size:"lg",children:h("actions.readMore")})}),e.jsx(g,{variant:"outline",size:"lg",onClick:q,"aria-label":h("share.title"),className:"border-white/30 text-white hover:bg-white/20",children:e.jsx(K,{className:"w-4 h-4"})})]})})]}),e.jsx(j,{open:N,onOpenChange:y,children:e.jsxs(f,{className:"sm:max-w-md",children:[e.jsx(v,{children:e.jsx(b,{className:"text-center",children:h("share.title")})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[S&&e.jsx("div",{className:"aspect-video overflow-hidden rounded-md mb-3",children:e.jsx("img",{src:S,alt:B,width:400,height:225,className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder.svg"}})}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:B}),F&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:F}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"ZapAround"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:_})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:h("share.description")}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border",children:e.jsx("p",{className:"text-xs text-gray-600 break-all font-mono",children:window.location.origin+P})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:h("share.shareVia")}),e.jsxs("div",{className:"flex justify-center gap-2 flex-wrap",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("facebook"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("twitter"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("whatsapp"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("telegram"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"Telegram"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("email"),className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Email"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:h("share.orCopyLink")}),e.jsx(g,{onClick:E,className:"flex items-center gap-2 mx-auto",disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),h("share.copied")]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),h("share.copyLink")]})})]})]})]})]})})]}):"compact"===i?e.jsx(me.div,{custom:d,initial:"hidden",animate:"visible",variants:I,className:we("group",m),children:e.jsx(R,{to:P,children:e.jsx(a,{className:"overflow-hidden border border-gray-200 hover:shadow-md transition-all duration-200 h-full",children:e.jsxs("div",{className:"flex gap-4 p-4",children:[l.image_url&&e.jsx("div",{className:"aspect-square w-20 flex-shrink-0 overflow-hidden rounded-md",children:e.jsx(z,{src:l.image_url,alt:B,width:80,height:80,quality:75,priority:!0,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 mb-1",children:B}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[e.jsx(V,{className:"w-3 h-3"}),_,e.jsx(J,{className:"w-3 h-3"}),h("detail.readingTime",{time:M})]}),l.category&&e.jsx(R,{to:`/${p}/blog/category/${l.category.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,onClick:e=>e.stopPropagation(),children:e.jsx(u,{variant:"outline",className:"text-xs hover:bg-primary hover:text-primary-foreground transition-colors cursor-pointer",children:l.category})})]})]})})})}):"minimal"===i?e.jsx(me.div,{custom:d,initial:"hidden",animate:"visible",variants:I,className:we("group",m),children:e.jsx(R,{to:P,className:"block",children:e.jsx("div",{className:"py-4 border-b border-gray-100 hover:bg-gray-50/50 transition-colors duration-200 rounded-lg px-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base line-clamp-2 mb-1 group-hover:text-primary transition-colors",children:B}),o&&F&&e.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-2",children:F}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:_}),e.jsx("span",{children:"•"}),e.jsx("span",{children:h("detail.readingTime",{time:M})}),l.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(R,{to:`/${p}/blog/category/${l.category.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,className:"hover:text-primary transition-colors",onClick:e=>e.stopPropagation(),children:l.category})]})]})]}),l.image_url&&e.jsx("div",{className:"aspect-square w-16 flex-shrink-0 overflow-hidden rounded",children:e.jsx(z,{src:l.image_url,alt:B,width:64,height:64,quality:75,priority:!0,className:"w-full h-full object-cover"})})]})})})}):e.jsxs(me.div,{custom:d,initial:"hidden",animate:"visible",variants:I,className:we("group",m),children:[e.jsxs(a,{className:"overflow-hidden transition-all hover:shadow-lg h-full flex flex-col border border-gray-200",children:[l.image_url&&e.jsx("div",{className:"aspect-video overflow-hidden relative",children:e.jsx(z,{src:l.image_url,alt:B,width:400,height:225,quality:85,priority:!0,className:"w-full h-full object-cover transition-transform hover:scale-105 duration-300"})}),e.jsxs(t,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.category&&e.jsx(R,{to:`/${p}/blog/category/${l.category.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,onClick:e=>e.stopPropagation(),children:e.jsxs(u,{variant:"outline",className:"text-xs hover:bg-primary hover:text-primary-foreground transition-colors cursor-pointer",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),l.category]})}),l.location&&e.jsxs(u,{variant:"outline",className:"text-xs bg-blue-50 border-blue-200",children:[e.jsx(H,{className:"w-3 h-3 mr-1"}),l.location]})]}),e.jsx("h3",{className:"text-lg font-semibold line-clamp-2 leading-tight group-hover:text-primary transition-colors",children:B})]}),e.jsxs(r,{className:"flex-1 pt-0",children:[o&&F&&e.jsx("p",{className:"text-muted-foreground text-sm line-clamp-3 mb-4",children:F}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),_]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),h("detail.readingTime",{time:M})]})]})]}),e.jsx(n,{className:"pt-0",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(R,{to:P,className:"flex-1",children:e.jsx(g,{variant:"outline",className:"w-full",children:h("actions.readMore")})}),e.jsx(g,{variant:"ghost",size:"sm",className:"ml-2",onClick:q,"aria-label":h("share.title"),children:e.jsx(K,{className:"w-4 h-4"})})]})})]}),e.jsx(j,{open:N,onOpenChange:y,children:e.jsxs(f,{className:"sm:max-w-md",children:[e.jsx(v,{children:e.jsx(b,{className:"text-center",children:h("share.title")})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[S&&e.jsx("div",{className:"aspect-video overflow-hidden rounded-md mb-3",children:e.jsx("img",{src:S,alt:B,width:400,height:225,className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder.svg"}})}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:B}),F&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:F}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"ZapAround"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:_})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:h("share.description")}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border",children:e.jsx("p",{className:"text-xs text-gray-600 break-all font-mono",children:window.location.origin+P})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:h("share.shareVia")}),e.jsxs("div",{className:"flex justify-center gap-2 flex-wrap",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("facebook"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("twitter"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("whatsapp"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("telegram"),className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"Telegram"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>O("email"),className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Email"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:h("share.orCopyLink")}),e.jsx(g,{onClick:E,className:"flex items-center gap-2 mx-auto",disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),h("share.copied")]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),h("share.copyLink")]})})]})]})]})]})})]})}function $e({variant:s="default"}){return"featured"===s?e.jsxs(a,{className:"overflow-hidden",children:[e.jsx(p,{className:"aspect-[21/9] w-full"}),e.jsxs(r,{className:"p-6",children:[e.jsx(p,{className:"h-4 w-20 mb-3"}),e.jsx(p,{className:"h-8 w-full mb-2"}),e.jsx(p,{className:"h-6 w-3/4 mb-4"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{className:"h-4 w-24"}),e.jsx(p,{className:"h-4 w-20"})]})]})]}):"compact"===s?e.jsx(a,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex gap-4 p-4",children:[e.jsx(p,{className:"aspect-square w-20 flex-shrink-0 rounded-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{className:"h-4 w-full mb-2"}),e.jsx(p,{className:"h-3 w-24 mb-2"}),e.jsx(p,{className:"h-4 w-16"})]})]})}):"minimal"===s?e.jsx("div",{className:"py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{className:"h-5 w-full mb-2"}),e.jsx(p,{className:"h-4 w-3/4 mb-2"}),e.jsx(p,{className:"h-3 w-48"})]}),e.jsx(p,{className:"aspect-square w-16 flex-shrink-0 rounded"})]})}):e.jsxs(a,{className:"overflow-hidden h-full flex flex-col",children:[e.jsx(p,{className:"aspect-video w-full"}),e.jsxs(t,{className:"pb-3",children:[e.jsx(p,{className:"h-4 w-20 mb-2"}),e.jsx(p,{className:"h-6 w-full mb-1"}),e.jsx(p,{className:"h-5 w-3/4"})]}),e.jsxs(r,{className:"flex-1 pt-0",children:[e.jsx(p,{className:"h-4 w-full mb-1"}),e.jsx(p,{className:"h-4 w-full mb-1"}),e.jsx(p,{className:"h-4 w-2/3 mb-4"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{className:"h-3 w-20"}),e.jsx(p,{className:"h-3 w-16"})]})]}),e.jsx(n,{className:"pt-0",children:e.jsx(p,{className:"h-10 w-full"})})]})}function ze(){const{t:i,i18n:n}=A("blog"),o=ue(),c=s.useRef(null),[d,m]=s.useState({currentPage:1,totalPages:1,totalPosts:0,isLoading:!1,error:null,viewMode:"grid",filters:{search:"",category:"",dateRange:"",sortBy:"newest",tags:[],location:""}}),[h,x]=s.useState(!1),[u,p]=s.useState([]);s.useEffect((()=>{const e=M.channel("blogs_changes").on("postgres_changes",{event:"*",schema:"public",table:"blogs"},(e=>{e.new&&"is_published"in e.new&&e.new.is_published&&o.invalidateQueries({queryKey:["blogs"]})})).subscribe();return()=>{M.removeChannel(e)}}),[o]);const j=Boolean(d.filters.category&&""!==d.filters.category.trim()),{data:f,isLoading:v,error:b}=S(d.currentPage,12,n.language),{data:k,isLoading:C,error:_}=D(d.filters.category,d.currentPage,12,{enabled:j,staleTime:3e5,gcTime:18e5}),P=j?k:f,L=j?C:v,$=j?_:b;s.useEffect((()=>{P&&m((e=>({...e,totalPages:P.totalPages||1,totalPosts:P.count||0,isLoading:!1,error:null})))}),[P]),s.useEffect((()=>{m((e=>({...e,isLoading:L})))}),[L]),s.useEffect((()=>{$&&m((e=>({...e,error:i("error.title"),isLoading:!1})))}),[$,i]);const z=s.useMemo((()=>{if(!P?.blogs)return[];let e=[...P.blogs].filter((e=>e.is_published));if(d.filters.search){const s=d.filters.search.toLowerCase();e=e.filter((e=>{const a=e.title_en?.toLowerCase().includes(s)||e.title_fr?.toLowerCase().includes(s)||e.title_es?.toLowerCase().includes(s),t=e.content_en?.toLowerCase().includes(s)||e.content_fr?.toLowerCase().includes(s)||e.content_es?.toLowerCase().includes(s);return a||t}))}if(d.filters.location&&(e=e.filter((e=>e.location===d.filters.location))),d.filters.dateRange){const s=new Date,a=new Date;switch(d.filters.dateRange){case"week":a.setDate(s.getDate()-7);break;case"month":a.setMonth(s.getMonth()-1);break;case"quarter":a.setMonth(s.getMonth()-3);break;case"year":a.setFullYear(s.getFullYear()-1)}e=e.filter((e=>new Date(e.published_at||e.created_at)>=a))}return d.filters.tags.length>0&&(e=e.filter((e=>d.filters.tags.some((s=>e.activities?.includes(s)||e.category?.toLowerCase().includes(s.toLowerCase())))))),e.sort(((e,s)=>{const a=new Date(e.published_at||e.created_at),t=new Date(s.published_at||s.created_at);return"oldest"===d.filters.sortBy?a.getTime()-t.getTime():t.getTime()-a.getTime()})),e}),[P,d.filters]),T=s.useMemo((()=>{if(!P?.blogs)return{categories:[],tags:[],locations:[]};return{categories:Array.from(new Set(P.blogs.filter((e=>e.category)).map((e=>e.category)))).filter(Boolean),tags:Array.from(new Set(P.blogs.flatMap((e=>e.activities||[])).filter(Boolean))),locations:Array.from(new Set(P.blogs.filter((e=>e.location)).map((e=>e.location)))).filter(Boolean)}}),[P]);s.useEffect((()=>{(async()=>{try{const{data:e,error:s}=await M.from("blogs").select("*").eq("is_published",!0).order("published_at",{ascending:!1}).limit(3);!s&&e&&p(e)}catch(e){}})()}),[]);const R=s.useCallback((async()=>{x(!0);try{await o.invalidateQueries({queryKey:["blogs"]})}catch(e){m((e=>({...e,error:i("error.title")})))}finally{x(!1)}}),[o,i]),B=s.useCallback((e=>{m((s=>({...s,currentPage:e}))),c.current&&c.current.scrollIntoView({behavior:"smooth"})}),[]),F=s.useCallback((e=>{m((s=>({...s,filters:e,currentPage:1})))}),[]),q=s.useCallback((e=>{m((s=>({...s,viewMode:e})))}),[]);return d.isLoading&&1===d.currentPage?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Me,{filters:d.filters,onFiltersChange:F,availableCategories:T.categories,availableTags:T.tags,availableLocations:T.locations,isLoading:!0}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:9}).map(((s,a)=>e.jsx($e,{variant:"default"},a)))})]}):d.error&&!d.isLoading?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(X,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i("error.title")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:i("error.description")}),e.jsx(g,{onClick:R,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),i("error.refreshing")]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),i("error.tryAgain")]})})]}):0!==z.length||d.isLoading?e.jsxs("div",{className:"space-y-6",ref:c,children:[e.jsx(Me,{filters:d.filters,onFiltersChange:F,availableCategories:T.categories,availableTags:T.tags,availableLocations:T.locations,isLoading:d.isLoading,totalResults:z.length}),u.length>0&&1===d.currentPage&&!Object.values(d.filters).some((e=>Array.isArray(e)?e.length>0:""!==e&&"newest"!==e))&&e.jsxs(a,{className:"mb-8 border-0 bg-gradient-to-r from-primary/5 to-secondary/5",children:[e.jsx(t,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),i("card.featured")]})}),e.jsx(r,{children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:u.slice(0,3).map(((s,a)=>e.jsx(Le,{blog:s,variant:"featured",index:a},s.id)))})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i("viewModes.title"),":"]}),e.jsx(w,{value:d.viewMode,onValueChange:q,children:e.jsxs(N,{className:"grid w-full grid-cols-3",children:[e.jsxs(y,{value:"grid",className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),i("viewModes.grid")]}),e.jsxs(y,{value:"list",className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),i("viewModes.list")]}),e.jsxs(y,{value:"minimal",className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),i("viewModes.minimal")]})]})})]}),d.isLoading&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(le,{className:"w-4 h-4 animate-spin"}),i("loading.posts")]})]}),e.jsx(de,{mode:"wait",children:e.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:`\n            ${"grid"===d.viewMode?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6":""}\n            ${"list"===d.viewMode?"grid grid-cols-1 lg:grid-cols-2 gap-4":""}\n            ${"minimal"===d.viewMode?"space-y-0":""}\n          `,children:z.map(((s,a)=>e.jsx(Le,{blog:s,variant:"grid"===d.viewMode?"default":"list"===d.viewMode?"compact":"minimal",index:a,showDescription:"minimal"!==d.viewMode},s.id)))},d.viewMode)}),d.totalPages>1&&e.jsx("div",{className:"flex justify-center pt-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"outline",disabled:1===d.currentPage||d.isLoading,onClick:()=>B(d.currentPage-1),children:i("pagination.previous")}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,d.totalPages)},((s,a)=>{const t=a+1;return e.jsx(g,{variant:t===d.currentPage?"default":"outline",size:"sm",onClick:()=>B(t),disabled:d.isLoading,children:t},t)}))}),e.jsx(g,{variant:"outline",disabled:d.currentPage===d.totalPages||d.isLoading,onClick:()=>B(d.currentPage+1),children:i("pagination.next")})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Me,{filters:d.filters,onFiltersChange:F,availableCategories:T.categories,availableTags:T.tags,availableLocations:T.locations,totalResults:0}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i("empty.noPosts")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:i("empty.noPostsDescription")}),e.jsx(g,{variant:"outline",onClick:()=>F({search:"",category:"",dateRange:"",sortBy:"newest",tags:[],location:""}),children:i("filters.clearFilters")})]})]})}function Ae({currentPage:s,totalPages:a,totalPosts:t,postsPerPage:l,onPageChange:r}){const{t:i}=A("blog");if(a<=1||0===t)return null;const n=(s-1)*l+1,o=Math.min(s*l,t),c=(()=>{const e=[];if(a<=5)for(let s=1;s<=a;s++)e.push(s);else if(s<=3){for(let s=1;s<=4;s++)e.push(s);e.push("ellipsis"),e.push(a)}else if(s>=a-2){e.push(1),e.push("ellipsis");for(let s=a-3;s<=a;s++)e.push(s)}else{e.push(1),e.push("ellipsis");for(let a=s-1;a<=s+1;a++)e.push(a);e.push("ellipsis"),e.push(a)}return e})();return e.jsxs("div",{className:"flex flex-col items-center gap-4 py-8",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i("pagination.showing")," ",n," ",i("pagination.to")," ",o," ",i("pagination.ofTotal",{total:t})]}),e.jsx(k,{children:e.jsxs(C,{children:[e.jsx(_,{children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>r(s-1),disabled:1===s,className:"gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),i("pagination.previous")]})}),c.map(((a,t)=>e.jsx(_,{children:"ellipsis"===a?e.jsx(P,{}):e.jsx(g,{variant:s===a?"default":"outline",size:"sm",onClick:()=>r(a),className:"min-w-[40px]",children:a})},t))),e.jsx(_,{children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>r(s+1),disabled:s===a,className:"gap-2",children:[i("pagination.next"),e.jsx(ie,{className:"h-4 w-4"})]})})]})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i("pagination.page")," ",s," ",i("pagination.of")," ",a]})]})}function Te({blog:a,language:t}){const{t:l}=A("blog"),r=s.useMemo((()=>L(a,t)),[a,t]),i=s.useMemo((()=>a.published_at?T(new Date(a.published_at),"PPP"):T(new Date(a.created_at),"PPP")),[a]),n=s.useMemo((()=>{if(!r.content)return 1;const e=r.content.trim(),s=e?e.split(/\s+/).filter((e=>e.length>0)).length:0;return Math.max(1,Math.ceil(s/200))}),[r.content]);return e.jsxs("header",{className:"p-6 border-b",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4 text-primary",children:r.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"mr-1.5 h-4 w-4"}),e.jsx("span",{children:a.published_at?`${l("detail.publishedOn")} ${i}`:`${l("detail.createdOn")} ${i}`})]}),a.category&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"mr-1.5 h-4 w-4"}),e.jsx(R,{to:`/${t}/blog/category/${a.category.toLowerCase()}`,className:"text-primary font-medium hover:underline",children:a.category})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l("detail.readingTime",{time:n})})]})]})}function Re({blog:a,language:t}){const{t:l}=A("blog"),[r,i]=s.useState(!1),n=s.useMemo((()=>L(a,t)),[a,t]),o=s.useMemo((()=>a.published_at?T(new Date(a.published_at),"PPP"):T(new Date(a.created_at),"PPP")),[a]),c="string"==typeof n.title?n.title:"",d="string"==typeof n.content?n.content:"",m=a.image_url?a.image_url.startsWith("http")?a.image_url:`https://zaparound.com${a.image_url}`:null;return e.jsxs(e.Fragment,{children:[m&&!r?e.jsx("div",{className:"w-full aspect-[16/9] relative",children:e.jsx("img",{src:m,alt:c,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",width:"1200",height:"675",sizes:"(max-width: 768px) 100vw, 1200px",onError:e=>{i(!0)}})}):a.image_url&&r?e.jsxs("div",{className:"w-full aspect-[16/9] bg-gray-100 flex flex-col items-center justify-center",children:[e.jsx(ne,{className:"h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:l("error.imageNotAvailable")})]}):null,e.jsx("div",{className:"p-6 md:p-8 prose prose-lg max-w-none",children:e.jsx(pe,{children:d})}),e.jsx("footer",{className:"px-6 py-4 bg-gray-50 border-t",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["ZapAround - ",l("detail.publishedOn")," ",o]})})})]})}function Be({blog:s,locale:a,url:t}){const l=`https://zaparound.com${t}`,r=s.image_url?s.image_url.startsWith("http")?s.image_url:`https://zaparound.com${s.image_url}`:"https://zaparound.com/og-image.png",i=a.split("_")[0],n=L(s,i),o=n.excerpt||n.content.substring(0,160),c={"@context":"https://schema.org","@type":"BlogPosting",headline:n.title,description:o,image:r,author:{"@type":"Person",name:"ZapAround Team"},publisher:{"@type":"Organization",name:"ZapAround",logo:{"@type":"ImageObject",url:"https://zaparound.com/zaparound-uploads/transparentnoliner.webp"}},datePublished:s.published_at||s.created_at,dateModified:s.updated_at,mainEntityOfPage:{"@type":"WebPage","@id":l},url:l,wordCount:n.content.length,articleSection:s.category||"Travel",keywords:s.category||"travel, trip planning, ZapAround"},d=["en_US","fr_FR","es_ES"].filter((e=>e!==a));return e.jsxs(je,{children:[e.jsx("title",{children:`${n.title} - ZapAround Blog`}),e.jsx("meta",{name:"description",content:o}),e.jsx("meta",{name:"keywords",content:s.category||"travel, trip planning, ZapAround"}),e.jsx("meta",{name:"author",content:"ZapAround Team"}),e.jsx("meta",{name:"language",content:a.split("_")[0]}),e.jsx("link",{rel:"canonical",href:l}),d.map((a=>{const t=`https://zaparound.com/${a.split("_")[0]}/blog/${s.slug}`;return e.jsx("link",{rel:"alternate",hrefLang:a,href:t},a)})),e.jsx("meta",{property:"og:title",content:n.title}),e.jsx("meta",{property:"og:description",content:o}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{property:"og:url",content:l}),e.jsx("meta",{property:"og:image",content:r}),e.jsx("meta",{property:"og:image:width",content:"1200"}),e.jsx("meta",{property:"og:image:height",content:"630"}),e.jsx("meta",{property:"og:image:alt",content:n.title}),e.jsx("meta",{property:"og:site_name",content:"ZapAround"}),e.jsx("meta",{property:"og:locale",content:a}),d.map((s=>e.jsx("meta",{property:"og:locale:alternate",content:s},s))),e.jsx("meta",{property:"article:published_time",content:s.published_at||s.created_at}),e.jsx("meta",{property:"article:modified_time",content:s.updated_at}),e.jsx("meta",{property:"article:author",content:"ZapAround Team"}),e.jsx("meta",{property:"article:section",content:s.category||"Travel"}),s.category&&e.jsx("meta",{property:"article:tag",content:s.category}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:n.title}),e.jsx("meta",{name:"twitter:description",content:o}),e.jsx("meta",{name:"twitter:image",content:r}),e.jsx("meta",{name:"twitter:image:alt",content:n.title}),e.jsx("meta",{name:"twitter:site",content:"@zaparound"}),e.jsx("meta",{name:"twitter:creator",content:"@zaparound"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(c)})]})}function Fe(){const{blogSlug:a=""}=B(),{t:t,i18n:l}=A("blog"),r=l.language,{data:i,isLoading:n,error:o}=q(a),c=F();return s.useEffect((()=>{fe(console.log),ve(console.log),be(console.log)}),[]),n?e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):i?.notFound?e.jsx("div",{className:"container mx-auto py-12 px-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 max-w-md mx-auto",children:[e.jsx(oe,{className:"h-16 w-16 text-amber-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t("error.notFound")}),e.jsx("p",{className:"text-gray-600 mb-6",children:t("error.notFoundDescription")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(g,{variant:"outline",onClick:()=>c(-1),className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),t("form.back")]}),e.jsx(g,{onClick:()=>c(`/${r}/blog`),className:"flex items-center gap-2",children:t("detail.backToList")})]})]})}):o||!i?e.jsxs("div",{className:"container mx-auto py-8 px-4 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-500",children:t("error.title")}),e.jsx("p",{className:"mb-6",children:o?.message||t("error.description")}),e.jsxs(R,{to:`/${r}/blog`,className:"inline-flex items-center text-primary hover:underline",children:[e.jsx(re,{className:"mr-1 h-4 w-4"}),t("detail.backToList")]})]}):e.jsxs(e.Fragment,{children:[i&&e.jsx(Be,{blog:i,locale:"en"===r?"en_US":"fr"===r?"fr_FR":"es_ES",url:`/${r}/blog/${a}`}),e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[e.jsxs(R,{to:`/${r}/blog`,className:"inline-flex items-center text-primary hover:underline mb-8",children:[e.jsx(re,{className:"mr-1 h-4 w-4"}),t("detail.backToList")]}),e.jsxs("article",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx(Te,{blog:i,language:r}),e.jsx(Re,{blog:i,language:r})]})]})]})}function Se({currentBlog:i,relatedBlogs:n,isLoading:o=!1}){const{t:c,i18n:d}=A("blog"),m=d.language,h=s.useMemo((()=>Array.isArray(n)?n.filter((e=>e.id!==i.id&&e.is_published)).slice(0,3):[]),[n,i.id]);return o?e.jsxs(a,{children:[e.jsx(t,{children:e.jsx(l,{children:c("widgets.related.title")})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map(((s,a)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-3/4"})]})]},a)))})})]}):0===h.length?null:e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),c("widgets.related.title")]})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:h.map(((s,a)=>{const t=L(s,m),l=$(s.title_en||s.id),r=`/${m}/blog/${l}`;return e.jsx(me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},children:e.jsxs(R,{to:r,className:"flex gap-3 group",children:[s.image_url&&e.jsx("div",{className:"w-16 h-16 rounded overflow-hidden flex-shrink-0",children:e.jsx(z,{src:s.image_url,alt:t.title,width:64,height:64,priority:!0,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm line-clamp-2 group-hover:text-primary transition-colors",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[e.jsx(V,{className:"w-3 h-3"}),T(new Date(s.published_at||s.created_at),"MMM dd")]})]})]})},s.id)}))})})]})}export{Ce as B,ze as E,Se as R,Ae as a,Be as b,we as c,Fe as d,ye as g,ke as s};
//# sourceMappingURL=components-blog.C3TFiFB1.js.map
