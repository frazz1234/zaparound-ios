import{r as e,j as s}from"../vendor/vendor-react-core.D1hcyiwY.js";import{s as r}from"./components-admin.CiIAoamg.js";import{h as a}from"../utils/utils-cache.ts.BtmNadnX.js";import{u as t,a as n}from"../vendor/vendor--react-router.Gdfmkz0l.js";function c({children:c,session:i}){const o=t(),{lang:d}=n(),[m,l]=e.useState(!0),[u,f]=e.useState(!1),[h,j]=e.useState(!1);return e.useEffect((()=>{(async()=>{if(i)try{const{data:{user:e}}=await r.auth.getUser(),{data:s,error:t}=await r.rpc("is_admin");f(!t&&!!s);let n=!1;if(e&&(n=a(e.id),j(n)),s||n)return void l(!1);return void o(`/${d||"en"}/dashboard`,{replace:!0})}catch(e){o(`/${d||"en"}/dashboard`,{replace:!0})}else l(!1)})()}),[i,o,d]),m&&i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fcfcfc]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#61936f] mx-auto mb-4"}),s.jsx("p",{className:"text-[#62626a]",children:"Checking access..."})]})}):s.jsx(s.Fragment,{children:c})}export{c as H};
//# sourceMappingURL=components-homepageaccesscontrol.tsx.DvR-kUKq.js.map
