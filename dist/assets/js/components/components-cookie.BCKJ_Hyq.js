import{r as e,j as s}from"../vendor/vendor-react-core.D1hcyiwY.js";import{B as t,N as a,O as n,P as i,Q as c,S as r,L as o,C as l,k as d,l as m,m as x,ah as h}from"./components-ui.C8hnNhgu.js";import{u}from"../hooks/hooks-usecookieconsent.ts.CpDptDPf.js";import{u as j}from"../vendor/vendor--react-i18next.DhHVfoav.js";import{A as f,m as p}from"../vendor/vendor--framer-motion.Dpgjd5L1.js";import{Y as y,X as v,t as g,Z as N,_ as k}from"../vendor/vendor--lucide-react.DRw9PYsu.js";import{c as C}from"../utils/utils-cookiemonitor.ts.D_pqS03V.js";function b(){const{t:r}=j("cookies"),{consentState:o,isOpen:l,acceptAll:d,acceptNecessary:m,updateCategoryConsent:x,savePreferences:h}=E(),[u,k]=e.useState("summary"),[C,b]=e.useState(null);e.useEffect((()=>{}),[l,o]);const S=async(e,s)=>{try{await x(e,s)}catch(t){b(r("error.updateCategory"))}};return e.useEffect((()=>{if(C){const e=setTimeout((()=>b(null)),5e3);return()=>clearTimeout(e)}}),[C]),e.useEffect((()=>{l&&o.hasInteracted&&k("settings")}),[l,o.hasInteracted]),s.jsx(f,{children:l&&s.jsxs(p.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3},className:"fixed bottom-0 left-0 right-0 z-[100] p-4 md:p-6 bg-background border-t shadow-lg cookie-consent-component",children:[C&&s.jsx("div",{className:"absolute top-0 left-0 right-0 p-2 bg-destructive text-destructive-foreground text-center text-sm",children:C}),s.jsxs("div",{className:"container max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(y,{className:"h-6 w-6 text-primary mr-2"}),s.jsx("h2",{className:"text-xl font-semibold",children:r("title")})]}),s.jsx(t,{variant:"ghost",size:"icon",onClick:m,"aria-label":r("close"),children:s.jsx(v,{className:"h-4 w-4"})})]}),s.jsxs(a,{value:u,onValueChange:k,className:"w-full",children:[s.jsxs(n,{className:"grid w-full grid-cols-2",children:[s.jsxs(i,{value:"summary",children:[s.jsx(g,{className:"h-4 w-4 mr-2"}),r("summary")]}),s.jsxs(i,{value:"settings",children:[s.jsx(N,{className:"h-4 w-4 mr-2"}),r("settings")]})]}),s.jsxs(c,{value:"summary",className:"py-4",children:[s.jsx("p",{className:"mb-4",children:r("summaryText")}),s.jsxs("p",{className:"mb-6 text-sm text-muted-foreground",children:[r("privacyLink")," ",s.jsx("a",{href:"/privacy",className:"text-primary hover:underline",children:r("privacyPolicy")})," ",r("and")," ",s.jsx("a",{href:"/cookie-policy",className:"text-primary hover:underline",children:r("cookiePolicy")}),"."]})]}),s.jsx(c,{value:"settings",className:"py-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(w,{id:"necessary",title:r("necessary.title"),description:r("necessary.description"),checked:o.necessary,onChange:()=>{},disabled:!0}),s.jsx(w,{id:"functional",title:r("functional.title"),description:r("functional.description"),checked:o.functional,onChange:e=>S("functional",e)}),s.jsx(w,{id:"analytics",title:r("analytics.title"),description:r("analytics.description"),checked:o.analytics,onChange:e=>S("analytics",e)}),s.jsx(w,{id:"marketing",title:r("marketing.title"),description:r("marketing.description"),checked:o.marketing,onChange:e=>S("marketing",e)})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 justify-end",children:[s.jsx(t,{variant:"outline",onClick:async()=>{try{await m()}catch(e){b(r("error.acceptNecessary"))}},children:r("acceptNecessary")}),"settings"===u&&s.jsx(t,{variant:"outline",onClick:async()=>{try{await h()}catch(e){b(r("error.savePreferences"))}},children:r("savePreferences")}),s.jsx(t,{variant:"default",onClick:async()=>{try{await d()}catch(e){b(r("error.acceptAll"))}},children:r("acceptAll")})]})]})]})})}function w({id:e,title:t,description:a,checked:n,onChange:i,disabled:c=!1}){return s.jsxs("div",{className:"flex items-start justify-between space-x-4 rounded-lg border p-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:t}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(r,{id:`cookie-${e}`,checked:n,onCheckedChange:i,disabled:c,"aria-label":t}),s.jsx(o,{htmlFor:`cookie-${e}`,className:"sr-only",children:t})]})]})}const S=e.createContext(void 0);function z({children:e}){const t=u(),a={...t,hasConsent:e=>t.consentState[e]};return s.jsxs(S.Provider,{value:a,children:[e,s.jsx(b,{})]})}const E=()=>{const s=e.useContext(S);if(void 0===s)throw new Error("useCookieConsentContext must be used within a CookieConsentProvider");return s};function P({showIcon:a=!0,variant:n="link",size:i="sm",className:c,...r}){const{t:o}=j("cookies"),l=E();e.useEffect((()=>{}),[]),e.useEffect((()=>{}),[l?.isOpen,l?.consentState]);return l?s.jsxs(t,{variant:n,size:i,onClick:e=>{e.preventDefault(),e.stopPropagation();try{if(!l?.openSettings)throw new Error("openSettings function is not available");l.openSettings()}catch(s){}},className:c,...r,children:[a&&s.jsx(k,{className:"h-4 w-4 mr-2"}),o("settings")]}):null}function I(){const{t:t}=j("cookies"),[a,n]=e.useState({totalSize:0,cookieCount:0,categoryCount:{necessary:0,functional:0,analytics:0,marketing:0}});e.useEffect((()=>{const e=()=>{const e=C.getInventory(),s=C.getCookieCountByCategory();n({totalSize:C.getTotalSize(),cookieCount:e.size,categoryCount:s})};e();const s=setInterval(e,6e4);return()=>clearInterval(s)}),[]);const i=204800,c=a.totalSize/i*100,r=a.cookieCount/50*100;return s.jsx("div",{className:"space-y-4",children:s.jsxs(l,{children:[s.jsx(d,{children:s.jsx(m,{children:t("statsTitle")})}),s.jsx(x,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{children:t("stats.totalSize")}),s.jsxs("span",{children:[(a.totalSize/1024).toFixed(2)," KB / ",200..toFixed(2)," KB"]})]}),s.jsx(h,{value:c,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{children:t("stats.cookieCount")}),s.jsxs("span",{children:[a.cookieCount," / ",50]})]}),s.jsx(h,{value:r,className:"h-2"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-4",children:t("stats.categories")}),s.jsx("div",{className:"grid gap-3",children:Object.entries(a.categoryCount).map((([e,a])=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"capitalize",children:t(`stats.category.${e}`)}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a})]},e)))})]})]})})]})})}export{P as C,I as a,z as b};
//# sourceMappingURL=components-cookie.BCKJ_Hyq.js.map
