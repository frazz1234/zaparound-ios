import{r as e,j as t}from"../vendor/vendor-react-core.D1hcyiwY.js";import{c as s}from"./components-blog.C3TFiFB1.js";function a({src:a,alt:r,width:i,height:o,className:n,priority:c=!1,loading:l="lazy",sizes:h="100vw",quality:u=75,placeholder:d="empty",blurDataURL:m,onLoad:p,onError:w,fallback:g,webp:v=!0,avif:f=!1,responsive:x=!0,aspectRatio:b}){const[y,j]=e.useState(!1),[S,P]=e.useState(!1),[R,N]=e.useState(c),z=e.useRef(null),L=e.useRef(null),k=e.useCallback((()=>{const e=a.startsWith("http")?a:`https://zaparound.com${a}`,t=new URL(e);i&&t.searchParams.set("w",i.toString()),o&&t.searchParams.set("h",o.toString()),u&&t.searchParams.set("q",u.toString());const s={default:t.toString()};if(v){const t=new URL(e);i&&t.searchParams.set("w",i.toString()),o&&t.searchParams.set("h",o.toString()),u&&t.searchParams.set("q",u.toString()),t.searchParams.set("fm","webp"),s.webp=t.toString()}if(f){const t=new URL(e);i&&t.searchParams.set("w",i.toString()),o&&t.searchParams.set("h",o.toString()),u&&t.searchParams.set("q",u.toString()),t.searchParams.set("fm","avif"),s.avif=t.toString()}return s}),[a,i,o,u,v,f]);e.useEffect((()=>{if(c||!z.current)return;const e=new IntersectionObserver((([t])=>{t.isIntersecting&&(N(!0),e.disconnect())}),{rootMargin:"50px 0px",threshold:.01});return e.observe(z.current),L.current=e,()=>{L.current&&L.current.disconnect()}}),[c]);const C=e.useCallback((()=>{j(!0),p?.()}),[p]),q=e.useCallback((()=>{P(!0),w?.()}),[w]),U=e.useCallback((()=>x?i&&i<=640?"(max-width: 640px) 100vw, 50vw":i&&i<=1024?"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw":"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw":h),[x,h,i]),E=k(),$=U(),H={position:"relative",overflow:"hidden",...b&&{aspectRatio:b.toString()},...i&&o&&!b&&!n&&{width:`${i}px`,height:`${o}px`}},I={width:"100%",height:"100%",objectFit:"cover",transition:"opacity 0.3s ease-in-out",opacity:y?1:0};return t.jsxs("div",{className:s("relative",n),style:H,children:[!y&&"blur"===d&&m&&t.jsx("img",{src:m,alt:"",className:"absolute inset-0 w-full h-full object-cover blur-sm scale-110",style:{filter:"blur(10px)"}}),!y&&"empty"===d&&t.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),R&&t.jsxs("picture",{children:[f&&E.avif&&t.jsx("source",{srcSet:E.avif,type:"image/avif"}),v&&E.webp&&t.jsx("source",{srcSet:E.webp,type:"image/webp"}),t.jsx("img",{ref:z,src:S&&g?g:E.default,alt:r,width:i,height:o,loading:l,sizes:$,className:s("transition-opacity duration-300",y?"opacity-100":"opacity-0"),style:I,onLoad:C,onError:q,decoding:"async",...c&&{fetchpriority:"high"}})]}),S&&!g&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-500",children:t.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),!y&&!S&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]})}export{a as O};
//# sourceMappingURL=components-optimizedimage.tsx.DVN-Ynzu.js.map
