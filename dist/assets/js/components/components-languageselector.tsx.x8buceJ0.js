import{r as e,j as a}from"../vendor/vendor-react-core.D1hcyiwY.js";import{an as s,ao as t,B as r}from"./components-ui.C8hnNhgu.js";import{u as o}from"../hooks/hooks-use-toast.ts.Dg8obzHg.js";import{S as n}from"./components-languagerouter.tsx.CHVsY7fH.js";import{s as i}from"./components-admin.CiIAoamg.js";import{u as l}from"../vendor/vendor--react-i18next.DhHVfoav.js";import{b as c,u as m}from"../vendor/vendor--react-router.Gdfmkz0l.js";import{k as u,af as g}from"../vendor/vendor--lucide-react.DRw9PYsu.js";function d({variant:d="ghost",className:p=""}){const{t:f,i18n:h}=l("languageSelector"),{toast:x}=o(),j=c(),v=m(),[w,b]=e.useState(!1),[S,N]=e.useState(null),[y,C]=e.useState(!1),k={en:{name:"English",flag:"ðŸ‡ºðŸ‡¸"},fr:{name:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},es:{name:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"}},L=h.language||"en";return a.jsx(s,{title:"Select Language",open:w,setOpen:b,width:"280px",height:"auto",showCloseButton:!y,showSuccess:y,trigger:a.jsx(r,{variant:d,size:"icon",className:p,onClick:()=>b(!0),children:a.jsx(g,{className:"h-5 w-5"})}),openChild:a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Choose your preferred language"}),n.map((e=>{const s=e===L,t=k[e];return a.jsxs("button",{onClick:()=>(async e=>{if(h.language!==e){N(e),C(!0);try{await h.changeLanguage(e);try{const{data:{user:a}}=await i.auth.getUser();a?.id&&(await i.from("profiles").update({language:e}).eq("id",a.id),localStorage.setItem("user_language",e),localStorage.setItem("user_language_timestamp",Date.now().toString()))}catch(a){}const s=j.pathname.split("/").filter(Boolean);if(n.includes(s[0])){s[0]=e;const a="/"+s.join("/");v(a,{replace:!0})}else{const a=`/${e}${j.pathname}`;v(a,{replace:!0})}setTimeout((()=>{b(!1),C(!1),N(null)}),2e3)}catch(s){x({title:f("error"),description:f("errorDescription"),variant:"destructive",duration:3e3}),C(!1),N(null)}}else b(!1)})(e),className:"w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 "+(s?"border-[#61936f] bg-[#61936f]/5 text-[#61936f]":"border-gray-200 hover:border-[#61936f]/50 hover:bg-gray-50"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:t.flag}),a.jsx("span",{className:"font-medium",children:t.name})]}),s&&a.jsx(u,{className:"h-4 w-4 text-[#61936f]"})]},e)}))]}),successChild:a.jsx(t,{title:"Language Changed",description:`Switched to ${S?k[S]?.name:"selected language"}`})})}export{d as L};
//# sourceMappingURL=components-languageselector.tsx.x8buceJ0.js.map
