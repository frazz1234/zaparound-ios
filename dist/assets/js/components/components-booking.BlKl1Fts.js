import{r as e,j as s}from"../vendor/vendor-react-core.D1hcyiwY.js";import{B as a,$ as n,a0 as i,a1 as t,a2 as l,L as c,a3 as r,p as d,q as o,r as x,s as m,t as h,a4 as p,I as j,a5 as u,a6 as g,a7 as f,a8 as N,a9 as v,aa as y,V as b,C as w,k as A,l as C,R as _,m as S}from"./components-ui.C8hnNhgu.js";import{a as k,g as R,s as $}from"../utils/utils-airportdata.ts.B5542_Sw.js";import{F,P as L,M as T,r as E,D as B,h as M,S as z,s as P,t as D,C as I,L as V,b as K,u as Q,A as U}from"../vendor/vendor--lucide-react.DRw9PYsu.js";import{c as Y}from"./components-blog.C3TFiFB1.js";import{u as H}from"../vendor/vendor--react-i18next.DhHVfoav.js";const O=[{code:"AC",name:"Air Canada"},{code:"WS",name:"WestJet"},{code:"AA",name:"American Airlines"},{code:"DL",name:"Delta Air Lines"},{code:"UA",name:"United Airlines"}],J=[...O,{code:"BA",name:"British Airways"},{code:"LH",name:"Lufthansa"},{code:"AF",name:"Air France"},{code:"KL",name:"KLM"},{code:"TK",name:"Turkish Airlines"},{code:"QR",name:"Qatar Airways"},{code:"EK",name:"Emirates"},{code:"EY",name:"Etihad Airways"},{code:"CX",name:"Cathay Pacific"},{code:"SQ",name:"Singapore Airlines"}],W=k.slice(0,50).map((e=>({code:e.iata_code,name:`${e.city} (${e.iata_code})`}))),q=({onFiltersChange:u})=>{const[g,f]=e.useState({airlines:[],stops:"any",bags:"any",priceRange:[0,5e3],connectingAirports:[],duration:[0,24]}),[N,v]=e.useState(!1),y=e=>{const s={...g,...e};f(s),u(s)},b=e=>{const s=g.airlines.includes(e)?g.airlines.filter((s=>s!==e)):[...g.airlines,e];y({airlines:s})},w=()=>g.airlines.length>0||"any"!==g.stops||"any"!==g.bags||g.priceRange[0]>0||g.priceRange[1]<5e3||g.connectingAirports.length>0||g.duration[0]>0||g.duration[1]<24;return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F,{className:"w-4 h-4 text-[#61936f]"}),s.jsx("h3",{className:"font-semibold text-[#1d1d1e]",children:"Filters"}),w()&&s.jsx("span",{className:"bg-[#61936f] text-white text-xs px-2 py-1 rounded-full",children:"Active"})]}),w()&&s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>{const e={airlines:[],stops:"any",bags:"any",priceRange:[0,5e3],connectingAirports:[],duration:[0,24]};f(e),u(e)},className:"text-[#62626a] hover:text-[#1d1d1e]",children:"Clear all"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs(n,{children:[s.jsx(i,{asChild:!0,children:s.jsxs(a,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(L,{className:"w-4 h-4 text-[#61936f]"}),s.jsx("span",{children:"Airlines"}),g.airlines.length>0&&s.jsx("span",{className:"bg-[#61936f] text-white text-xs px-1.5 py-0.5 rounded-full",children:g.airlines.length})]})}),s.jsx(t,{className:"w-80 p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium",children:"Airlines"}),s.jsxs("div",{className:"space-y-2",children:[O.map((e=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{id:`airline-${e.code}`,checked:g.airlines.includes(e.code),onCheckedChange:()=>b(e.code)}),s.jsx(c,{htmlFor:`airline-${e.code}`,className:"text-sm cursor-pointer",children:e.name})]},e.code))),N?s.jsxs("div",{className:"space-y-2",children:[s.jsx(r,{}),J.slice(O.length).map((e=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{id:`airline-${e.code}`,checked:g.airlines.includes(e.code),onCheckedChange:()=>b(e.code)}),s.jsx(c,{htmlFor:`airline-${e.code}`,className:"text-sm cursor-pointer",children:e.name})]},e.code))),s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>v(!1),className:"text-[#61936f] hover:text-[#1d1d1e] p-0 h-auto",children:"Show less"})]}):s.jsxs(a,{variant:"ghost",size:"sm",onClick:()=>v(!0),className:"text-[#61936f] hover:text-[#1d1d1e] p-0 h-auto",children:["Show more airlines (",J.length-O.length,")"]})]})]})})]}),s.jsxs(d,{value:g.stops,onValueChange:e=>y({stops:e}),children:[s.jsxs(o,{className:"w-40",children:[s.jsx(T,{className:"w-4 h-4 text-[#61936f] mr-2"}),s.jsx(x,{placeholder:"Stops"})]}),s.jsxs(m,{children:[s.jsx(h,{value:"any",children:"Any stops"}),s.jsx(h,{value:"nonstop",children:"Nonstop only"}),s.jsx(h,{value:"1_or_fewer",children:"1 stop or fewer"}),s.jsx(h,{value:"2_or_fewer",children:"2 stops or fewer"})]})]}),s.jsxs(d,{value:g.bags,onValueChange:e=>y({bags:e}),children:[s.jsxs(o,{className:"w-40",children:[s.jsx(E,{className:"w-4 h-4 text-[#61936f] mr-2"}),s.jsx(x,{placeholder:"Bags"})]}),s.jsxs(m,{children:[s.jsx(h,{value:"any",children:"Any bags"}),s.jsx(h,{value:"included",children:"Bags included"}),s.jsx(h,{value:"not_included",children:"Bags not included"})]})]}),s.jsxs(n,{children:[s.jsx(i,{asChild:!0,children:s.jsxs(a,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(B,{className:"w-4 h-4 text-[#61936f]"}),s.jsx("span",{children:"Price"}),(g.priceRange[0]>0||g.priceRange[1]<5e3)&&s.jsx("span",{className:"bg-[#61936f] text-white text-xs px-1.5 py-0.5 rounded-full",children:"1"})]})}),s.jsx(t,{className:"w-80 p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Price Range"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(c,{className:"text-sm text-[#62626a]",children:["$",g.priceRange[0]," - $",g.priceRange[1]]}),s.jsx(p,{value:g.priceRange,onValueChange:e=>y({priceRange:e}),max:5e3,min:0,step:50,className:"w-full"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(j,{type:"number",placeholder:"Min",value:g.priceRange[0],onChange:e=>y({priceRange:[parseInt(e.target.value)||0,g.priceRange[1]]}),className:"w-full"}),s.jsx(j,{type:"number",placeholder:"Max",value:g.priceRange[1],onChange:e=>y({priceRange:[g.priceRange[0],parseInt(e.target.value)||5e3]}),className:"w-full"})]})]})})]}),s.jsxs(n,{children:[s.jsx(i,{asChild:!0,children:s.jsxs(a,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(T,{className:"w-4 h-4 text-[#61936f]"}),s.jsx("span",{children:"Airports"}),g.connectingAirports.length>0&&s.jsx("span",{className:"bg-[#61936f] text-white text-xs px-1.5 py-0.5 rounded-full",children:g.connectingAirports.length})]})}),s.jsx(t,{className:"w-80 p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium",children:"Connecting Airports"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:W.map((e=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{id:`airport-${e.code}`,checked:g.connectingAirports.includes(e.code),onCheckedChange:()=>(e=>{const s=g.connectingAirports.includes(e)?g.connectingAirports.filter((s=>s!==e)):[...g.connectingAirports,e];y({connectingAirports:s})})(e.code)}),s.jsx(c,{htmlFor:`airport-${e.code}`,className:"text-sm cursor-pointer",children:e.name})]},e.code)))})]})})]}),s.jsxs(n,{children:[s.jsx(i,{asChild:!0,children:s.jsxs(a,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(M,{className:"w-4 h-4 text-[#61936f]"}),s.jsx("span",{children:"Duration"}),(g.duration[0]>0||g.duration[1]<24)&&s.jsx("span",{className:"bg-[#61936f] text-white text-xs px-1.5 py-0.5 rounded-full",children:"1"})]})}),s.jsx(t,{className:"w-80 p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Duration Range"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(c,{className:"text-sm text-[#62626a]",children:[g.duration[0],"h - ",g.duration[1],"h"]}),s.jsx(p,{value:g.duration,onValueChange:e=>y({duration:e}),max:24,min:0,step:1,className:"w-full"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(j,{type:"number",placeholder:"Min hours",value:g.duration[0],onChange:e=>y({duration:[parseInt(e.target.value)||0,g.duration[1]]}),className:"w-full"}),s.jsx(j,{type:"number",placeholder:"Max hours",value:g.duration[1],onChange:e=>y({duration:[g.duration[0],parseInt(e.target.value)||24]}),className:"w-full"})]})]})})]})]})]})},X=({value:l,onChange:c,placeholder:d="Select airport",className:o,disabled:x=!1})=>{const{t:m}=H(),[h,p]=e.useState(!1),[j,w]=e.useState(""),[A,C]=e.useState([]),[_,S]=e.useState([]),[k,F]=e.useState(null),T=e.useRef(null);e.useEffect((()=>{S(R())}),[]),e.useEffect((()=>{if(l){const e=$(l).find((e=>e.iata_code===l));F(e||null)}else F(null)}),[l]),e.useEffect((()=>{const e=setTimeout((()=>{if(j.trim()){const e=$(j);C(e)}else C([])}),150);return()=>clearTimeout(e)}),[j]);const E=e=>{F(e),c(e.iata_code),p(!1),w("")},B=e=>`${e.city}, ${e.country}`;return s.jsxs(n,{open:h,onOpenChange:p,children:[s.jsx(i,{asChild:!0,children:s.jsxs(a,{variant:"outline",role:"combobox","aria-expanded":h,className:Y("w-full justify-between text-left font-normal",!k&&"text-muted-foreground",o),disabled:x,children:[k?s.jsxs("div",{className:"flex items-center gap-2 truncate",children:[s.jsx(L,{className:"h-4 w-4 text-[#61936f]"}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"font-medium",children:k.iata_code}),s.jsxs("span",{className:"text-xs text-[#62626a] truncate",children:[k.city,", ",k.country]})]})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{className:"h-4 w-4 text-[#62626a]"}),s.jsx("span",{children:d})]}),s.jsx(z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(t,{className:"w-[400px] p-0",align:"start",children:s.jsxs(u,{shouldFilter:!1,children:[s.jsxs("div",{className:"flex items-center border-b px-3",children:[s.jsx(z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(g,{ref:T,placeholder:"Search airports, cities, or countries...",value:j,onValueChange:w,className:"border-0 focus:ring-0"})]}),s.jsxs(f,{className:"max-h-[300px]",children:[s.jsx(N,{children:s.jsxs("div",{className:"p-4 text-center",children:[s.jsx(L,{className:"mx-auto h-8 w-8 text-[#62626a] mb-2"}),s.jsx("p",{className:"text-sm text-[#62626a]",children:"No airports found"}),s.jsx("p",{className:"text-xs text-[#62626a] mt-1",children:"Try searching by airport code, city, or country"})]})}),A.length>0&&s.jsx(v,{heading:"Search Results",children:A.map((e=>s.jsxs(y,{value:`${e.iata_code} ${e.city} ${e.name} ${e.country}`,onSelect:()=>E(e),className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-[#f8f9fa]",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-[#61936f] rounded-full text-white text-xs font-bold",children:e.iata_code}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-[#1d1d1e] truncate",children:e.name}),s.jsx("div",{className:"text-sm text-[#62626a] truncate",children:B(e)})]}),s.jsx(b,{variant:"secondary",className:"text-xs",children:e.type})]},e.iata_code)))}),0===j.length&&s.jsx(v,{heading:"Popular Airports",children:_.map((e=>s.jsxs(y,{value:e.iata_code,onSelect:()=>E(e),className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-[#f8f9fa]",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-[#61936f] rounded-full text-white text-xs font-bold",children:e.iata_code}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-[#1d1d1e] truncate",children:e.name}),s.jsx("div",{className:"text-sm text-[#62626a] truncate",children:B(e)})]}),s.jsx(P,{className:"h-4 w-4 text-yellow-500"})]},e.iata_code)))}),0===j.length&&s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-xs text-[#62626a] mb-2",children:"Quick Tips:"}),s.jsxs("div",{className:"space-y-1 text-xs text-[#62626a]",children:[s.jsx("div",{children:'• Search by airport code (e.g., "JFK", "LHR", "YUL")'}),s.jsx("div",{children:'• Search by city name (e.g., "Montreal", "New York", "London")'}),s.jsx("div",{children:'• Search by airport name (e.g., "Heathrow", "Trudeau")'}),s.jsx("div",{children:'• Search by country (e.g., "Canada", "United States")'})]})]})]})]})]})})]})};function G({offerId:n,passengers:i,onAncillariesSelected:t,onBack:l,onContinue:c,selectedAncillaries:r,ancillariesMetadata:d}){const{t:o}=H("booking"),[x,m]=e.useState(!1),[h,p]=e.useState(null),[j,u]=e.useState(null);e.useEffect((()=>{n&&i.length>0&&u({offer_id:n,passengers:i.map((e=>({id:e.id,title:e.title,given_name:e.given_name,family_name:e.family_name,email:e.email,phone_number:e.phone_number,gender:"male"===e.gender?"m":"f",born_on:e.born_on})))})}),[n,i]);const g=()=>{if(!d)return 0;return parseFloat(d.offer_total_amount||"0")-parseFloat(d.original_offer_total_amount||"0")},f=r&&Object.keys(r).length>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-[#1d1d1e] mb-2",children:o("details.ancillariesSelection")}),s.jsx("p",{className:"text-[#62626a]",children:o("details.ancillariesSelectionDesc")})]}),s.jsxs(w,{children:[s.jsxs(A,{children:[s.jsxs(C,{className:"flex items-center space-x-2",children:[s.jsx(D,{className:"h-5 w-5 text-[#61936f]"}),s.jsx("span",{children:o("ancillaries.title")})]}),s.jsx(_,{children:o("ancillaries.description")})]}),s.jsx(S,{className:"space-y-6",children:h?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("div",{className:"text-red-500 mb-4",children:[s.jsx(I,{className:"h-8 w-8 mx-auto mb-2"}),s.jsx("p",{className:"font-medium",children:"Error loading ancillaries"}),s.jsx("p",{className:"text-sm",children:h})]}),s.jsx(a,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Try Again"})]}):j?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-[#62626a] mb-4",children:"Additional services like seat selection and extra baggage will be available during the booking process."}),s.jsx("p",{className:"text-sm text-[#62626a]",children:"You can add these services when you complete your booking with the airline."})]}),x&&s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(V,{className:"h-6 w-6 animate-spin text-[#61936f] mr-2"}),s.jsx("span",{className:"text-[#62626a]",children:o("ancillaries.loading")})]}),f&&d&&s.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(K,{className:"h-5 w-5 text-green-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-900",children:o("ancillaries.selectServices")}),s.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(r).map((([e,a])=>{const n=i.find((s=>s.id===e));return s.jsxs("div",{className:"text-sm text-green-700",children:[s.jsxs("span",{className:"font-medium",children:[n?`${n.given_name} ${n.family_name}`:"Passenger",":"]}),s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[a.bags&&a.bags.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Bags:"}),a.bags.map(((e,a)=>s.jsxs(b,{variant:"secondary",className:"ml-2",children:[e.type," - ",e.weight]},a)))]}),a.seats&&a.seats.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Seats:"}),a.seats.map(((e,a)=>s.jsx(b,{variant:"secondary",className:"ml-2",children:e.designator},a)))]})]})]},e)}))}),g()>0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:s.jsxs("p",{className:"text-sm text-green-700",children:[s.jsx("span",{className:"font-medium",children:"Additional cost:"})," ",d.offer_total_currency," ",g().toFixed(2)]})})]})]})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(V,{className:"h-8 w-8 animate-spin text-[#61936f] mx-auto mb-4"}),s.jsx("p",{className:"text-[#62626a]",children:o("ancillaries.loading")})]})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(a,{variant:"outline",onClick:l,children:[s.jsx(Q,{className:"h-4 w-4 mr-2"}),o("navigation.backToPassengers")]}),s.jsxs(a,{onClick:c,className:"bg-[#61936f] hover:bg-[#4a7a5a] text-white",disabled:x,children:[o("navigation.continueToLuggage"),s.jsx(U,{className:"h-4 w-4 ml-2"})]})]})]})}export{X as A,q as F,G as a};
//# sourceMappingURL=components-booking.BlKl1Fts.js.map
